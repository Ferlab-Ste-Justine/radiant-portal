CREATE TABLE family
(
    "id"                      INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    "case_id"                 INTEGER REFERENCES "case" ("id")    NOT NULL,
    "family_member_id"        INTEGER REFERENCES "patient" ("id") NOT NULL,
    "relationship_to_proband" TEXT                                NOT NULL REFERENCES "family_relationships" ("code"),
    "affected_status"         TEXT                                NOT NULL REFERENCES "affected_statuses" ("code")
);

CREATE INDEX IF NOT EXISTS idx_family_case_id ON "family" ("case_id");
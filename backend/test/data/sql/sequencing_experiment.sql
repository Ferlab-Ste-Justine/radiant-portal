CREATE TABLE `sequencing_experiment`
(
    "id"                    INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    "case_id"               INTEGER REFERENCES "case" ("id")    NOT NULL,
    "patient_id"            INTEGER REFERENCES "patient" ("id") NOT NULL,
    "sample_id"             INTEGER REFERENCES "sample" ("id")  NOT NULL,
    "experimental_strategy" TEXT REFERENCES "experimental_strategies" ("code"),
    "status"                TEXT                                NOT NULL REFERENCES "statuses" ("code"),
    "aliquot"               TEXT                                NOT NULL,
    "request_id"            INTEGER REFERENCES "request" ("id"),
    "performer_lab_id"      INTEGER REFERENCES "organization" ("id"),
    "run_name"              TEXT,
    "run_alias"             TEXT,
    "run_date"              date,
    "platform"              TEXT REFERENCES "platforms" ("code"),
    "capture_kit"           TEXT,
    "is_paired_end"         BOOLEAN,
    "read_length"           INTEGER,
    "created_on"            TIMESTAMP                           NOT NULL,
    "updated_on"            TIMESTAMP                           NOT NULL
);

CREATE INDEX IF NOT EXISTS idx_sequencing_experiment_case_id ON "sequencing_experiment" ("case_id");
CREATE INDEX IF NOT EXISTS idx_sequencing_experiment_patient_id ON "sequencing_experiment" ("patient_id");
CREATE INDEX IF NOT EXISTS idx_sequencing_experiment_sample_id ON "sequencing_experiment" ("sample_id");
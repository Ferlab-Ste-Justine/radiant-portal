import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{r as o}from"./index-DUAV1Q2A.js";import{f as he}from"./index-DhvbgntC.js";import{a as G}from"./index-B-lxVbXh.js";import{u as be,d as xe,e as ge,V as ye,a as we,S as Ne,c as z,b as je}from"./useDebounce-_hd2-_B7.js";import{c as Oe}from"./index-C66Dxnp2.js";import{c as b}from"./utils-BNf5BS2b.js";import{X as $}from"./dialog-3ysF2mkX.js";import{C as Te}from"./check-D0WsHlur.js";import"./v4-CtRu48qb.js";import"./index-BiAv9jRD.js";import"./index-aKoabQ1X.js";import"./index-VDvXe9nZ.js";import"./index-CqVsPxxY.js";import"./Combination-BCojpehm.js";import"./index-5epIGEb9.js";import"./createLucideIcon-DirO1-NP.js";const Ve=Oe({base:"inline-flex items-center rounded-sm border font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring",variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"},size:{default:"text-xs py-1 px-2",xs:"text-xs py-1 px-2",sm:"text-sm py-1 px-2",md:"text-sm py-1 px-3",lg:"text-base py-1 px-4"}},defaultVariants:{variant:"default",size:"default"}});function re({className:d,variant:s,size:n,...c}){return r.jsx("div",{className:Ve({variant:s,size:n,className:d}),...c})}re.__docgenInfo={description:"",methods:[],displayName:"Badge",composes:["VariantProps"]};function R(d,s){if(d.length===0)return{};if(!s)return{"":d};const n={};return d.forEach(c=>{const p=c[s]||"";n[p]||(n[p]=[]),n[p].push(c)}),n}function Q(d,s){return s.filter(n=>d.includes(n.value))}function Se(d,s){for(const[,n]of Object.entries(d))if(n.some(c=>s.find(p=>p.value===c.value)))return!0;return!1}function E({value:d,onChange:s,placeholder:n,defaultOptions:c=[],options:p,debounceDelay:le=500,onSearch:f,onSearchSync:k,emptyIndicator:W,maxSelected:K=Number.MAX_SAFE_INTEGER,onMaxSelected:w,hidePlaceholderWhenSelected:B,disabled:N,groupBy:x,className:ne,badgeClassName:ie,selectFirstItem:oe=!0,creatable:V=!1,triggerSearchOnFocus:C=!1,commandProps:i,inputProps:u,hideClearAllButton:ue=!1,ref:de}){const m=o.useRef(null),[g,A]=o.useState(!1),[ce,X]=o.useState(!1),[H,J]=o.useState(!1),L=o.useRef(null),[a,j]=o.useState(Q(d||[],c)),[O,D]=o.useState(R(c,x)),[h,F]=o.useState(""),y=be(h,le);o.useImperativeHandle(de,()=>({selectedValue:[...a],input:m.current,focus:()=>{var e;return(e=m==null?void 0:m.current)==null?void 0:e.focus()},reset:()=>j([])}),[a]);const T=e=>{L.current&&!L.current.contains(e.target)&&m.current&&!m.current.contains(e.target)&&(A(!1),m.current.blur())},q=o.useCallback(e=>{const t=a.filter(l=>l.value!==e.value);j(t),s==null||s(t.map(l=>l.value))},[s,a]),me=o.useCallback(e=>{const t=m.current;t&&((e.key==="Delete"||e.key==="Backspace")&&t.value===""&&a.length>0&&(a[a.length-1].fixed||q(a[a.length-1])),e.key==="Escape"&&t.blur())},[q,a]);o.useEffect(()=>(g?(document.addEventListener("mousedown",T),document.addEventListener("touchend",T)):(document.removeEventListener("mousedown",T),document.removeEventListener("touchend",T)),()=>{document.removeEventListener("mousedown",T),document.removeEventListener("touchend",T)}),[g]),o.useEffect(()=>{d&&c.length>0&&j(Q(d,c))},[d,c]),o.useEffect(()=>{if(!p||f)return;const e=R(p||[],x);JSON.stringify(e)!==JSON.stringify(O)&&D(e)},[c,p,x,f,O]),o.useEffect(()=>{const e=()=>{const l=k==null?void 0:k(y);D(R(l||[],x))};(async()=>{!k||!g||(C&&e(),y&&e())})()},[y,x,g,C]),o.useEffect(()=>{const e=async()=>{J(!0);const l=await(f==null?void 0:f(y));D(R(l||[],x)),J(!1)};(async()=>{!f||!g||(C&&await e(),y&&await e())})()},[y,x,g,C]);const fe=()=>{if(!V||Se(O,[{value:h,label:h}])||a.find(t=>t.value===h))return;const e=r.jsx(z,{value:h,className:"cursor-pointer",onMouseDown:t=>{t.preventDefault(),t.stopPropagation()},onSelect:t=>{if(a.length>=K){w==null||w(a.length);return}F("");const l=[...a,{value:t,label:t}];j(l),s==null||s(l.map(_=>_.value))},children:`Create "${h}"`});if(!f&&h.length>0||f&&y.length>0&&!H)return e},pe=o.useCallback(()=>f&&!V&&Object.keys(O).length===0?r.jsx("div",{className:"p-2 py-4 text-center text-sm",children:"No data"}):r.jsx(xe,{children:W||r.jsx("div",{className:"text-center text-sm",children:"No data"})}),[V,W,f,O]),ve=o.useCallback(()=>{if(i!=null&&i.filter)return i.filter;if(V)return(e,t)=>e.toLowerCase().includes(t.toLowerCase())?1:-1},[V,i==null?void 0:i.filter]);return r.jsxs(ge,{ref:L,...i,onKeyDown:e=>{var t;me(e),(t=i==null?void 0:i.onKeyDown)==null||t.call(i,e)},className:b("h-auto overflow-visible bg-background",i==null?void 0:i.className),shouldFilter:(i==null?void 0:i.shouldFilter)!==void 0?i.shouldFilter:!f,filter:ve(),children:[r.jsx("div",{className:b("flex min-h-10 rounded-md border border-input text-base md:text-sm ring-offset-background focus-within:ring-2 focus-within:ring-ring",{"px-3 py-2":a.length!==0,"cursor-text":!N&&a.length!==0},ne),onClick:()=>{var e;N||(e=m==null?void 0:m.current)==null||e.focus()},children:r.jsxs("div",{className:"relative flex flex-1 flex-wrap gap-1",children:[a.map(e=>r.jsxs(re,{size:"xs",variant:"default",className:b("rounded-lg","data-[disabled]:bg-muted-foreground data-[disabled]:text-muted data-[disabled]:hover:bg-muted-foreground","data-[fixed]:bg-muted-foreground data-[fixed]:text-muted data-[fixed]:hover:bg-muted-foreground",ie),"data-fixed":e.fixed,"data-disabled":N||void 0,children:[e.label,r.jsx("button",{className:b("ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring hover:cursor-pointer",(N||e.fixed)&&"hidden"),onKeyDown:t=>{t.key==="Enter"&&q(e)},onMouseDown:t=>{t.preventDefault(),t.stopPropagation()},onClick:()=>q(e),children:r.jsx($,{size:12,className:"text-primary-foreground"})})]},e.value)),r.jsx(ye.Input,{...u,ref:m,value:h,disabled:N,onValueChange:e=>{var t;F(e),(t=u==null?void 0:u.onValueChange)==null||t.call(u,e)},onBlur:e=>{var t;ce||A(!1),(t=u==null?void 0:u.onBlur)==null||t.call(u,e)},onFocus:e=>{var t;A(!0),(t=u==null?void 0:u.onFocus)==null||t.call(u,e)},placeholder:B&&a.length!==0?"":n,className:b("flex-1 bg-transparent outline-none placeholder:text-muted-foreground",{"w-full":B,"px-3 py-2":a.length===0,"ml-1":a.length!==0},u==null?void 0:u.className)}),r.jsx("button",{type:"button",onClick:()=>{j(a.filter(e=>e.fixed)),s==null||s(a.filter(e=>e.fixed).map(e=>e.value))},className:b("absolute right-0 h-[26px] p-0",(ue||N||a.length<1||a.filter(e=>e.fixed).length===a.length)&&"hidden"),children:r.jsx($,{size:18,className:""})})]})}),r.jsx("div",{className:b("relative",g?"block":"hidden"),children:r.jsx(we,{className:"absolute top-1 z-10 w-full rounded-md border border-border bg-popover text-popover-foreground shadow-md outline-none animate-in fade-in-0 zoom-in-95",onMouseLeave:()=>{X(!1)},onMouseEnter:()=>{X(!0)},onMouseUp:()=>{var e;(e=m==null?void 0:m.current)==null||e.focus()},children:H?r.jsx("div",{className:"p-1",children:r.jsx(Ne,{className:"h-8 w-full"})}):r.jsxs(r.Fragment,{children:[pe(),fe(),!oe&&r.jsx(z,{value:"-",className:"hidden"}),Object.entries(O).map(([e,t])=>r.jsx(je,{heading:e,className:"h-full overflow-auto",children:r.jsx(r.Fragment,{children:t.map(l=>{var U;const _=(U=a.map(v=>v.value))==null?void 0:U.includes(l.value);return r.jsxs(z,{value:l.label,disabled:l.disable,onMouseDown:v=>{v.preventDefault(),v.stopPropagation()},onSelect:()=>{if(a.length>=K){w==null||w(a.length);return}F("");let v=[];a.find(S=>S.value===l.value)?v=a.filter(S=>S.value!==l.value):v=[...a,l],j(v),s==null||s(v.map(S=>S.value))},className:b("cursor-pointer",l.disable&&"cursor-default text-muted-foreground"),children:[r.jsx("span",{className:"flex-1",children:l.label}),_?r.jsx(Te,{className:"w-4"}):null]},l.value)})})},e))]})})})]})}E.displayName="MultipleSelector";E.__docgenInfo={description:"",methods:[{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"reset",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MultipleSelector",props:{ref:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<MultipleSelectorRef>",elements:[{name:"MultipleSelectorRef"}]},description:""},value:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},defaultOptions:{required:!1,tsType:{name:"Array",elements:[{name:"MultiSelectorOption"}],raw:"MultiSelectorOption[]"},description:"",defaultValue:{value:"[]",computed:!1}},options:{required:!1,tsType:{name:"Array",elements:[{name:"MultiSelectorOption"}],raw:"MultiSelectorOption[]"},description:"manually controlled options"},placeholder:{required:!1,tsType:{name:"string"},description:""},emptyIndicator:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Empty component."},debounceDelay:{required:!1,tsType:{name:"number"},description:"Debounce time for async search. Only work with `onSearch`.",defaultValue:{value:"500",computed:!1}},triggerSearchOnFocus:{required:!1,tsType:{name:"boolean"},description:"Only work with `onSearch` prop. Trigger search when `onFocus`.\nFor example, when user click on the input, it will trigger the search to get initial options.",defaultValue:{value:"false",computed:!1}},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => Promise<MultiSelectorOption[]>",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"Promise",elements:[{name:"Array",elements:[{name:"MultiSelectorOption"}],raw:"MultiSelectorOption[]"}],raw:"Promise<MultiSelectorOption[]>"}}},description:"async search"},onSearchSync:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => MultiSelectorOption[]",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"Array",elements:[{name:"MultiSelectorOption"}],raw:"MultiSelectorOption[]"}}},description:`sync search. This search will not showing loadingIndicator.
The rest props are the same as async search.
i.e.: creatable, groupBy, delay.`},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(options: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"options"}],return:{name:"void"}}},description:""},maxSelected:{required:!1,tsType:{name:"number"},description:"Limit the maximum number of selected options.",defaultValue:{value:"Number.MAX_SAFE_INTEGER",computed:!0}},onMaxSelected:{required:!1,tsType:{name:"signature",type:"function",raw:"(maxLimit: number) => void",signature:{arguments:[{type:{name:"number"},name:"maxLimit"}],return:{name:"void"}}},description:"When the number of selected options exceeds the limit, the onMaxSelected will be called."},hidePlaceholderWhenSelected:{required:!1,tsType:{name:"boolean"},description:"Hide the placeholder when there are options selected."},disabled:{required:!1,tsType:{name:"boolean"},description:""},groupBy:{required:!1,tsType:{name:"string"},description:"Group the options base on provided key."},className:{required:!1,tsType:{name:"string"},description:""},badgeClassName:{required:!1,tsType:{name:"string"},description:""},selectFirstItem:{required:!1,tsType:{name:"boolean"},description:`First item selected is a default behavior by cmdk. That is why the default is true.
This is a workaround solution by add a dummy item.

@reference: https://github.com/pacocoursey/cmdk/issues/171`,defaultValue:{value:"true",computed:!1}},creatable:{required:!1,tsType:{name:"boolean"},description:"Allow user to create option when there is no option matched.",defaultValue:{value:"false",computed:!1}},commandProps:{required:!1,tsType:{name:"ReactComponentPropsWithoutRef",raw:"React.ComponentPropsWithoutRef<typeof Command>",elements:[{name:"Command"}]},description:"Props of `Command`"},inputProps:{required:!1,tsType:{name:"Omit",elements:[{name:"ReactComponentPropsWithoutRef",raw:"React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>",elements:[{name:"CommandPrimitive.Input"}]},{name:"union",raw:'"value" | "placeholder" | "disabled"',elements:[{name:"literal",value:'"value"'},{name:"literal",value:'"placeholder"'},{name:"literal",value:'"disabled"'}]}],raw:`Omit<
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>,
  "value" | "placeholder" | "disabled"
>`},description:"Props of `CommandInput`"},hideClearAllButton:{required:!1,tsType:{name:"boolean"},description:"hide the clear all button.",defaultValue:{value:"false",computed:!1}}}};const Xe={title:"Base/Data Entry/Inputs/Multi Selector",component:E,args:{value:[],onChange:he(),placeholder:"Placeholder"}},se=[{label:"Nextjs",value:"Nextjs"},{label:"Vite",value:"vite"},{label:"Nuxt",value:"nuxt",disable:!0},{label:"Vue",value:"vue, disable: true",disable:!0},{label:"Remix",value:"remix"},{label:"Svelte",value:"svelte",disable:!0},{label:"Angular",value:"angular",disable:!0},{label:"Ember",value:"ember",disable:!0},{label:"React",value:"react"},{label:"Gatsby",value:"gatsby",disable:!0},{label:"Astro",value:"astro",disable:!0}],M={render:()=>{const[d,s]=o.useState(["Nextjs"]);return r.jsx(E,{value:d,onChange:n=>{s(n),G("onChange")(n)},className:"max-w-[300px]",placeholder:"Placeholder",commandProps:{className:"max-w-[300px]"},defaultOptions:se})}},I={render:()=>{const[d,s]=o.useState(["Nextjs"]);return r.jsx(E,{value:d,onChange:n=>{s(n),G("onChange")(n)},onSearch:async n=>(G("onSearch")(n),new Promise(c=>{setTimeout(()=>c(se),1e3)})),debounceDelay:300,className:"max-w-[300px]",placeholder:"Placeholder",commandProps:{className:"max-w-[300px]"}})}};var Y,Z,P;M.parameters={...M.parameters,docs:{...(Y=M.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  render: () => {
    const [values, setValues] = useState<string[]>(["Nextjs"]);
    return <MultiSelector value={values} onChange={newValues => {
      setValues(newValues);
      action("onChange")(newValues);
    }} className="max-w-[300px]" placeholder="Placeholder" commandProps={{
      className: "max-w-[300px]"
    }} defaultOptions={defaultOptions} />;
  }
}`,...(P=(Z=M.parameters)==null?void 0:Z.docs)==null?void 0:P.source}}};var ee,te,ae;I.parameters={...I.parameters,docs:{...(ee=I.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  render: () => {
    const [values, setValues] = useState<string[]>(["Nextjs"]);
    return <MultiSelector value={values} onChange={newValues => {
      setValues(newValues);
      action("onChange")(newValues);
    }} onSearch={async searchValue => {
      action("onSearch")(searchValue);
      return new Promise(resolve => {
        setTimeout(() => resolve(defaultOptions), 1000);
      });
    }} debounceDelay={300} className="max-w-[300px]" placeholder="Placeholder" commandProps={{
      className: "max-w-[300px]"
    }} />;
  }
}`,...(ae=(te=I.parameters)==null?void 0:te.docs)==null?void 0:ae.source}}};const He=["Default","AsyncSearch"];export{I as AsyncSearch,M as Default,He as __namedExportsOrder,Xe as default};

import{j as s}from"./jsx-runtime-Cf8x2fCZ.js";import{u as B,_ as q,C as L,a as C,b as K,c as R,d as F}from"./useDebounce-B-LKbXMQ.js";import{r as l}from"./index-tvICUrOf.js";import{S as G}from"./skeleton-CfkhzHGY.js";import{c as S}from"./utils-CytzSlOG.js";import{X as M}from"./x-DA4wTodG.js";import{C as X}from"./check-CfPT3E_d.js";function V(r,p){return p.find(f=>r===f.value)}const H=({options:r=[],placeholder:p,emptyIndicator:f,value:i,onChange:t,disabled:N,debounceDelay:g=500,onSearch:d,optionFilterProp:x="label",optionLabelProp:v="label",className:k,loading:c})=>{const n=l.useRef(null),[b,y]=l.useState(!1),[u,m]=l.useState(V(i,r)),[E,o]=l.useState(""),[h,D]=l.useState(""),j=B(h,g),I=l.useCallback(e=>{const a=n.current;if(a){if(b||y(!0),e.key==="Enter"&&a.value!==""){const T=r.find(z=>z[x]===a.value);T&&(m(T),t==null||t(T.value))}e.key==="Escape"&&a.blur()}},[b,r,t]),A=l.useCallback(()=>{y(!1),o((u==null?void 0:u[v])||"")},[u]),_=l.useCallback(e=>{o(e[v]),m(e),t==null||t(e.value),setTimeout(()=>{var a;(a=n==null?void 0:n.current)==null||a.blur()},0)},[t]);l.useEffect(()=>{if(i&&r.length>0){const e=V(i,r);e&&(m(e),o(e[v]))}},[i,r]),l.useEffect(()=>{!d||!open||j&&(d==null||d(j))},[j,open]);const w=r.filter(e=>e[x].toLowerCase().trim().includes(h.toLowerCase().trim()));return s.jsxs(q,{onKeyDown:I,className:k,shouldFilter:!1,children:[s.jsx("div",{className:"relative shadow-sm outline-none focus-within:ring-1 focus-within:ring-ring rounded-md",children:s.jsx(L,{ref:n,value:E,onValueChange:c?void 0:e=>{o(e),D(e)},onBlur:A,onFocus:()=>y(!0),placeholder:p,disabled:N,className:"text-sm",rightAddon:s.jsx("button",{type:"button",onClick:()=>{m(void 0),o(""),t==null||t("")},className:S("h-[26px] p-0",{hidden:!u||N}),children:s.jsx(M,{size:18,className:""})})})}),s.jsx("div",{className:"relative mt-1",children:s.jsx("div",{className:S("animate-in fade-in-0 zoom-in-95 absolute top-0 z-10 w-full rounded-xl bg-popover outline-none shadow-md",b?"block":"hidden"),children:s.jsxs(C,{className:"rounded-lg border",children:[c?s.jsx(q.Loading,{children:s.jsx("div",{className:"p-1",children:s.jsx(G,{className:"h-8 w-full"})})}):null,w.length>0&&!c?s.jsx(K,{children:w.map(e=>s.jsxs(R,{value:e[x],onMouseDown:a=>{a.preventDefault(),a.stopPropagation()},onSelect:()=>_(e),className:"cursor-pointer",children:[s.jsx("span",{className:"flex-1",children:e.label}),e.value===i?s.jsx(X,{className:"w-4"}):null]},e.value))}):null,!c&&s.jsx(F,{children:f||s.jsx("div",{className:"text-center text-sm",children:"No data"})})]})})})]})};H.__docgenInfo={description:"",methods:[],displayName:"AutoComplete",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:"",defaultValue:{value:"[]",computed:!1}},emptyIndicator:{required:!1,tsType:{name:"ReactNode"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},debounceDelay:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},optionLabelProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}},optionFilterProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}},loading:{required:!1,tsType:{name:"boolean"},description:""}}};export{H as A};

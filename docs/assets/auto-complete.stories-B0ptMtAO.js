import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{r as s}from"./index-DUAV1Q2A.js";import{f as Q}from"./index-DZ0MIZXx.js";import{a as T}from"./index-B-lxVbXh.js";import{u as U,_ as q,C as Y,a as Z,b as $,c as ee,d as ae}from"./useDebounce-YIncFZue.js";import{S as se}from"./skeleton-D8I-6WeW.js";import{c as D}from"./utils-BNf5BS2b.js";import{X as te}from"./x-Cz0A3g9-.js";import{C as re}from"./check-CSglOr1T.js";import{I as le}from"./input-BBoUXjlS.js";import"./v4-CtRu48qb.js";import"./index-BmGZeU5I.js";import"./index-CpwtQhPK.js";import"./index-CSO_qfi8.js";import"./index-CqVsPxxY.js";import"./Combination-GE29BHtn.js";import"./dialog-LoynrdwV.js";import"./createLucideIcon-BJ1WAg3L.js";function I(t,o){return o.find(r=>t===r.value)}const y=({defaultOptions:t=[],placeholder:o,emptyIndicator:r,value:u,onChange:l,disabled:A,debounceDelay:L=500,onSearch:p,optionFilterProp:j="label",optionLabelProp:b="label",className:B})=>{const i=s.useRef(null),[g,S]=s.useState(!1),[f,C]=s.useState(!1),[c,v]=s.useState(I(u,t)),[w,M]=s.useState(t),[W,d]=s.useState(""),[E,z]=s.useState(""),N=U(E,L),G=s.useCallback(e=>{const n=i.current;if(n){if(g||S(!0),e.key==="Enter"&&n.value!==""){const m=w.find(J=>J[j]===n.value);m&&(v(m),l==null||l(m.value))}e.key==="Escape"&&n.blur()}},[g,w,l]),X=s.useCallback(()=>{S(!1),d((c==null?void 0:c[b])||"")},[c]),H=s.useCallback(e=>{d(e[b]),v(e),l==null||l(e.value),setTimeout(()=>{var n;(n=i==null?void 0:i.current)==null||n.blur()},0)},[l]);s.useEffect(()=>{if(u&&t.length>0){const e=I(u,t);v(e),d((e==null?void 0:e[b])||"")}},[u,t]),s.useEffect(()=>{const e=async()=>{C(!0);const m=await(p==null?void 0:p(N));M(m||[]),C(!1)};(async()=>{!p||!open||N&&await e()})()},[N,open]);const P=w.filter(e=>e[j].toLowerCase().trim().includes(E.toLowerCase().trim()));return a.jsxs(q,{onKeyDown:G,className:B,shouldFilter:!1,children:[a.jsx("div",{className:"relative outline-none focus-within:ring-2 focus-within:ring-ring rounded-md",children:a.jsx(Y,{ref:i,value:W,onValueChange:f?void 0:e=>{d(e),z(e)},onBlur:X,onFocus:()=>S(!0),placeholder:o,disabled:A,className:"text-sm",rightAddon:a.jsx("button",{type:"button",onClick:()=>{v(void 0),d(""),l==null||l(void 0)},className:D("h-[26px] p-0",{hidden:!c||A}),children:a.jsx(te,{size:18,className:""})})})}),a.jsx("div",{className:"relative mt-1",children:a.jsx("div",{className:D("animate-in fade-in-0 zoom-in-95 absolute top-0 z-10 w-full rounded-xl bg-popover outline-none shadow-md",g?"block":"hidden"),children:a.jsxs(Z,{className:"rounded-lg border",children:[f?a.jsx(q.Loading,{children:a.jsx("div",{className:"p-1",children:a.jsx(se,{className:"h-8 w-full"})})}):null,P.length>0&&!f?a.jsx($,{children:P.map(e=>a.jsxs(ee,{value:e[j],onMouseDown:n=>{n.preventDefault(),n.stopPropagation()},onSelect:()=>H(e),className:"cursor-pointer",children:[a.jsx("span",{className:"flex-1",children:e.label}),e.value===u?a.jsx(re,{className:"w-4"}):null]},e.value))}):null,!f&&a.jsx(ae,{children:r||a.jsx("div",{className:"text-center text-sm",children:"No data"})})]})})})]})};y.__docgenInfo={description:"",methods:[],displayName:"AutoComplete",props:{defaultOptions:{required:!1,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:"",defaultValue:{value:"[]",computed:!1}},emptyIndicator:{required:!1,tsType:{name:"ReactNode"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => Promise<T[]>",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"Promise",elements:[{name:"Array",elements:[{name:"T"}],raw:"T[]"}],raw:"Promise<T[]>"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},debounceDelay:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},optionLabelProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}},optionFilterProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}}}};const V=[{value:"next.js",label:"Next.js"},{value:"sveltekit",label:"SvelteKit"},{value:"nuxt.js",label:"Nuxt.js"},{value:"remix",label:"Remix"},{value:"astro",label:"Astro"},{value:"wordpress",label:"WordPress"},{value:"express.js",label:"Express.js"},{value:"nest.js",label:"Nest.js"}],Ne={title:"Base/Data Entry/Inputs/Auto Complete",component:y,args:{value:"",defaultOptions:V,onChange:Q(),placeholder:"Placeholder"}},x={render:()=>{const[t,o]=s.useState("nest.js");return a.jsx(y,{value:t,onChange:r=>{o(r),T("onChange")(r)},className:"max-w-[300px]",placeholder:"Placeholder",defaultOptions:V})}},h={render:()=>{const[t,o]=s.useState("");return a.jsxs(a.Fragment,{children:[a.jsx(y,{value:t,onChange:r=>{o(r),T("onChange")(r)},onSearch:async r=>(T("onSearch")(r),new Promise(u=>{setTimeout(()=>u(V),1e3)})),debounceDelay:300,className:"max-w-[300px]",placeholder:"Placeholder"}),a.jsx(le,{placeholder:"Placeholder"})]})}};var k,R,O;x.parameters={...x.parameters,docs:{...(k=x.parameters)==null?void 0:k.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState<string | undefined>('nest.js');
    return <AutoComplete value={value} onChange={value => {
      setValue(value);
      action('onChange')(value);
    }} className="max-w-[300px]" placeholder="Placeholder" defaultOptions={FRAMEWORKS} />;
  }
}`,...(O=(R=x.parameters)==null?void 0:R.docs)==null?void 0:O.source}}};var K,_,F;h.parameters={...h.parameters,docs:{...(K=h.parameters)==null?void 0:K.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState<string | undefined>('');
    return <>
        <AutoComplete value={value} onChange={value => {
        setValue(value);
        action('onChange')(value);
      }} onSearch={async searchValue => {
        action('onSearch')(searchValue);
        return new Promise(resolve => {
          setTimeout(() => resolve(FRAMEWORKS), 1000);
        }) as Promise<Option[]>;
      }} debounceDelay={300} className="max-w-[300px]" placeholder="Placeholder" />
        <Input placeholder="Placeholder" />
      </>;
  }
}`,...(F=(_=h.parameters)==null?void 0:_.docs)==null?void 0:F.source}}};const Te=["Default","Async"];export{h as Async,x as Default,Te as __namedExportsOrder,Ne as default};

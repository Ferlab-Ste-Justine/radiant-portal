import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{r as s}from"./index-DUAV1Q2A.js";import{f as X}from"./index-DhvbgntC.js";import{a as S}from"./index-B-lxVbXh.js";import{u as H,_ as A,C as J,a as Q,b as U,c as Y,d as Z}from"./useDebounce-DAsjOoms.js";import{S as $}from"./skeleton-D8I-6WeW.js";import{c as P}from"./utils-BNf5BS2b.js";import{X as ee}from"./x-CWrtXjNM.js";import{I as ae}from"./input-BBoUXjlS.js";import"./v4-CtRu48qb.js";import"./index-B_Tq-F3N.js";import"./index-CpwtQhPK.js";import"./index-CSO_qfi8.js";import"./index-CqVsPxxY.js";import"./Combination-BychJT1d.js";import"./index-DgC28C5k.js";import"./dialog-8K1hlcAL.js";import"./createLucideIcon-DirO1-NP.js";function T(t,o){return o.find(r=>t===r.value)}const b=({defaultOptions:t=[],placeholder:o,emptyIndicator:r,value:i,onChange:n,disabled:R,debounceDelay:q=500,onSearch:u,className:F})=>{const c=s.useRef(null),[y,j]=s.useState(!1),[f,V]=s.useState(!1),[m,v]=s.useState(T(i,t)),[g,K]=s.useState(t),[_,d]=s.useState(""),[B,L]=s.useState(""),w=H(B,q),M=s.useCallback(e=>{const l=c.current;if(l){if(y||j(!0),e.key==="Enter"&&l.value!==""){const p=g.find(G=>G.label===l.value);p&&(v(p),n==null||n(p.value))}e.key==="Escape"&&l.blur()}},[y,g,n]),W=s.useCallback(()=>{j(!1),d((m==null?void 0:m.label)||"")},[m]),z=s.useCallback(e=>{d(e.label),v(e),n==null||n(e.value),setTimeout(()=>{var l;(l=c==null?void 0:c.current)==null||l.blur()},0)},[n]);return s.useEffect(()=>{if(i&&t.length>0){const e=T(i,t);v(e),d((e==null?void 0:e.label)||"")}},[i,t]),s.useEffect(()=>{const e=async()=>{V(!0);const p=await(u==null?void 0:u(w));K(p||[]),V(!1)};(async()=>{!u||!open||w&&await e()})()},[w,open]),a.jsxs(A,{onKeyDown:M,className:F,shouldFilter:!u,children:[a.jsx("div",{className:"relative outline-none focus-within:ring-2 focus-within:ring-ring rounded-md",children:a.jsx(J,{ref:c,value:_,onValueChange:f?void 0:e=>{d(e),L(e)},onBlur:W,onFocus:()=>j(!0),placeholder:o,disabled:R,className:"text-sm",rightAddon:a.jsx("button",{type:"button",onClick:()=>{v(void 0),d(""),n==null||n(void 0)},className:P("h-[26px] p-0",{hidden:!m||R}),children:a.jsx(ee,{size:18,className:""})})})}),a.jsx("div",{className:"relative mt-1",children:a.jsx("div",{className:P("animate-in fade-in-0 zoom-in-95 absolute top-0 z-10 w-full rounded-xl bg-popover outline-none shadow-md",y?"block":"hidden"),children:a.jsxs(Q,{className:"rounded-lg border",children:[f?a.jsx(A.Loading,{children:a.jsx("div",{className:"p-1",children:a.jsx($,{className:"h-8 w-full"})})}):null,g.length>0&&!f?a.jsx(U,{children:g.map(e=>a.jsx(Y,{value:e.label,onMouseDown:l=>{l.preventDefault(),l.stopPropagation()},onSelect:()=>z(e),className:"cursor-pointer",children:e.label},e.value))}):null,!f&&a.jsx(Z,{children:r||a.jsx("div",{className:"text-center text-sm",children:"No data"})})]})})})]})};b.__docgenInfo={description:"",methods:[],displayName:"AutoComplete",props:{defaultOptions:{required:!1,tsType:{name:"Array",elements:[{name:"intersection",raw:"Record<'value' | 'label', string> & Record<string, string>",elements:[{name:"Record",elements:[{name:"union",raw:"'value' | 'label'",elements:[{name:"literal",value:"'value'"},{name:"literal",value:"'label'"}]},{name:"string"}],raw:"Record<'value' | 'label', string>"},{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"}]}],raw:"Option[]"},description:"",defaultValue:{value:"[]",computed:!1}},emptyIndicator:{required:!1,tsType:{name:"ReactNode"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => Promise<Option[]>",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"Promise",elements:[{name:"Array",elements:[{name:"intersection",raw:"Record<'value' | 'label', string> & Record<string, string>",elements:[{name:"Record",elements:[{name:"union",raw:"'value' | 'label'",elements:[{name:"literal",value:"'value'"},{name:"literal",value:"'label'"}]},{name:"string"}],raw:"Record<'value' | 'label', string>"},{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"}]}],raw:"Option[]"}],raw:"Promise<Option[]>"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},debounceDelay:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}}}};const N=[{value:"next.js",label:"Next.js"},{value:"sveltekit",label:"SvelteKit"},{value:"nuxt.js",label:"Nuxt.js"},{value:"remix",label:"Remix"},{value:"astro",label:"Astro"},{value:"wordpress",label:"WordPress"},{value:"express.js",label:"Express.js"},{value:"nest.js",label:"Nest.js"}],ye={title:"Base/Data Entry/Inputs/Auto Complete",component:b,args:{value:"",defaultOptions:N,onChange:X(),placeholder:"Placeholder"}},x={render:()=>{const[t,o]=s.useState("nest.js");return a.jsx(b,{value:t,onChange:r=>{o(r),S("onChange")(r)},className:"max-w-[300px]",placeholder:"Placeholder",defaultOptions:N})}},h={render:()=>{const[t,o]=s.useState("");return a.jsxs(a.Fragment,{children:[a.jsx(b,{value:t,onChange:r=>{o(r),S("onChange")(r)},onSearch:async r=>(S("onSearch")(r),new Promise(i=>{setTimeout(()=>i(N),1e3)})),debounceDelay:300,className:"max-w-[300px]",placeholder:"Placeholder"}),a.jsx(ae,{placeholder:"Placeholder"})]})}};var E,D,I;x.parameters={...x.parameters,docs:{...(E=x.parameters)==null?void 0:E.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState<string | undefined>('nest.js');
    return <AutoComplete value={value} onChange={value => {
      setValue(value);
      action('onChange')(value);
    }} className="max-w-[300px]" placeholder="Placeholder" defaultOptions={FRAMEWORKS} />;
  }
}`,...(I=(D=x.parameters)==null?void 0:D.docs)==null?void 0:I.source}}};var C,O,k;h.parameters={...h.parameters,docs:{...(C=h.parameters)==null?void 0:C.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState<string | undefined>('');
    return <>
        <AutoComplete value={value} onChange={value => {
        setValue(value);
        action('onChange')(value);
      }} onSearch={async searchValue => {
        action('onSearch')(searchValue);
        return new Promise(resolve => {
          setTimeout(() => resolve(FRAMEWORKS), 1000);
        });
      }} debounceDelay={300} className="max-w-[300px]" placeholder="Placeholder" />
        <Input placeholder="Placeholder" />
      </>;
  }
}`,...(k=(O=h.parameters)==null?void 0:O.docs)==null?void 0:k.source}}};const je=["Default","Async"];export{h as Async,x as Default,je as __namedExportsOrder,ye as default};

import{j as s}from"./jsx-runtime-Cf8x2fCZ.js";import{r as t}from"./index-tvICUrOf.js";import{f as X}from"./index-BZkcKs8Z.js";import{a as V}from"./index-B-lxVbXh.js";import{u as H}from"./i18n-Ber6Uh7x.js";import{u as J,_ as q,C as Q,a as U,b as Y,c as Z,d as $}from"./useDebounce-DIeXkQHm.js";import{S as ee}from"./skeleton-ChuViQYQ.js";import{c as D}from"./utils-BNf5BS2b.js";import{X as se}from"./x-DA4wTodG.js";import{C as te}from"./check-DKX_pDN6.js";import"./index-yBjzXJbu.js";import"./v4-CtRu48qb.js";import"./iframe-DkzBV2aV.js";import"./index-BYARNSco.js";import"./index-Dq5VjjLd.js";import"./index-_r67kdfS.js";import"./index-fNjTmf9T.js";import"./Combination-DL__bl4O.js";import"./dialog-KEXKKwkU.js";import"./createLucideIcon-DKFpjrVJ.js";function k(a,i){return i.find(o=>a===o.value)}const g=({options:a=[],placeholder:i,emptyIndicator:o,value:u,onChange:l,disabled:f,debounceDelay:j=500,onSearch:r,optionFilterProp:c="label",optionLabelProp:S="label",className:_,loading:v})=>{const d=t.useRef(null),[y,N]=t.useState(!1),[m,h]=t.useState(k(u,a)),[B,p]=t.useState(""),[A,F]=t.useState(""),w=J(A,j),M=t.useCallback(e=>{const n=d.current;if(n){if(y||N(!0),e.key==="Enter"&&n.value!==""){const T=a.find(G=>G[c]===n.value);T&&(h(T),l==null||l(T.value))}e.key==="Escape"&&n.blur()}},[y,a,l]),W=t.useCallback(()=>{N(!1),p((m==null?void 0:m[S])||"")},[m]),z=t.useCallback(e=>{p(e[S]),h(e),l==null||l(e.value),setTimeout(()=>{var n;(n=d==null?void 0:d.current)==null||n.blur()},0)},[l]);t.useEffect(()=>{if(u&&a.length>0){const e=k(u,a);e&&(h(e),p(e[S]))}},[u,a]),t.useEffect(()=>{!r||!open||w&&(r==null||r(w))},[w,open]);const E=a.filter(e=>e[c].toLowerCase().trim().includes(A.toLowerCase().trim()));return s.jsxs(q,{onKeyDown:M,className:_,shouldFilter:!1,children:[s.jsx("div",{className:"relative outline-none focus-within:ring-2 focus-within:ring-ring rounded-md",children:s.jsx(Q,{ref:d,value:B,onValueChange:v?void 0:e=>{p(e),F(e)},onBlur:W,onFocus:()=>N(!0),placeholder:i,disabled:f,className:"text-sm",rightAddon:s.jsx("button",{type:"button",onClick:()=>{h(void 0),p(""),l==null||l("")},className:D("h-[26px] p-0",{hidden:!m||f}),children:s.jsx(se,{size:18,className:""})})})}),s.jsx("div",{className:"relative mt-1",children:s.jsx("div",{className:D("animate-in fade-in-0 zoom-in-95 absolute top-0 z-10 w-full rounded-xl bg-popover outline-none shadow-md",y?"block":"hidden"),children:s.jsxs(U,{className:"rounded-lg border",children:[v?s.jsx(q.Loading,{children:s.jsx("div",{className:"p-1",children:s.jsx(ee,{className:"h-8 w-full"})})}):null,E.length>0&&!v?s.jsx(Y,{children:E.map(e=>s.jsxs(Z,{value:e[c],onMouseDown:n=>{n.preventDefault(),n.stopPropagation()},onSelect:()=>z(e),className:"cursor-pointer",children:[s.jsx("span",{className:"flex-1",children:e.label}),e.value===u?s.jsx(te,{className:"w-4"}):null]},e.value))}):null,!v&&s.jsx($,{children:o||s.jsx("div",{className:"text-center text-sm",children:"No data"})})]})})})]})};g.__docgenInfo={description:"",methods:[],displayName:"AutoComplete",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:"",defaultValue:{value:"[]",computed:!1}},emptyIndicator:{required:!1,tsType:{name:"ReactNode"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},debounceDelay:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},optionLabelProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}},optionFilterProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}},loading:{required:!1,tsType:{name:"boolean"},description:""}}};const C=[{value:"next.js",label:"Next.js"},{value:"sveltekit",label:"SvelteKit"},{value:"nuxt.js",label:"Nuxt.js"},{value:"remix",label:"Remix"},{value:"astro",label:"Astro"},{value:"wordpress",label:"WordPress"},{value:"express.js",label:"Express.js"},{value:"nest.js",label:"Nest.js"}],Ne={title:"Base/Data Entry/Inputs/Auto Complete",component:g,args:{value:"",options:C,onChange:X(),placeholder:"Placeholder"}},x={render:()=>{const[a,i]=t.useState("nest.js");return H(),s.jsx(g,{value:a,onChange:o=>{i(o),V("onChange")(o)},className:"max-w-[300px]",placeholder:"Placeholder",options:C})}},b={render:()=>{const[a,i]=t.useState(""),[o,u]=t.useState(!1),[l,f]=t.useState([]),j=async r=>(u(!0),V("onSearch")(r),new Promise(c=>{setTimeout(()=>c(C),1e3)}).then(c=>f(c)).finally(()=>u(!1)));return s.jsx(g,{value:a,onChange:r=>{i(r),V("onChange")(r)},options:l,loading:o,onSearch:j,debounceDelay:300,className:"max-w-[300px]",placeholder:"Placeholder"})}};var I,R,L;x.parameters={...x.parameters,docs:{...(I=x.parameters)==null?void 0:I.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState<string | undefined>('nest.js');
    const {
      t
    } = useI18n();
    return <AutoComplete value={value} onChange={value => {
      setValue(value);
      action('onChange')(value);
    }} className="max-w-[300px]" placeholder="Placeholder" options={FRAMEWORKS} />;
  }
}`,...(L=(R=x.parameters)==null?void 0:R.docs)==null?void 0:L.source}}};var O,P,K;b.parameters={...b.parameters,docs:{...(O=b.parameters)==null?void 0:O.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState<string | undefined>('');
    const [loading, setLoading] = useState(false);
    const [options, setOptions] = useState<Option[]>([]);
    const handleSearch = async (searchValue: string) => {
      setLoading(true);
      action('onSearch')(searchValue);
      return new Promise<Option[]>(resolve => {
        setTimeout(() => resolve(FRAMEWORKS), 1000);
      }).then(results => setOptions(results)).finally(() => setLoading(false));
    };
    return <AutoComplete value={value} onChange={value => {
      setValue(value);
      action('onChange')(value);
    }} options={options} loading={loading} onSearch={handleSearch} debounceDelay={300} className="max-w-[300px]" placeholder="Placeholder" />;
  }
}`,...(K=(P=b.parameters)==null?void 0:P.docs)==null?void 0:K.source}}};const we=["Default","Async"];export{b as Async,x as Default,we as __namedExportsOrder,Ne as default};

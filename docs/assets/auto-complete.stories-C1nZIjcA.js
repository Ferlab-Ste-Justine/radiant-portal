import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{r as s}from"./index-DUAV1Q2A.js";import{f as X}from"./index-DhvbgntC.js";import{a as S}from"./index-B-lxVbXh.js";import{u as H,V as A,C as J,a as Q,S as U,b as Y,c as Z,d as $}from"./useDebounce-_hd2-_B7.js";import{c as T}from"./utils-BNf5BS2b.js";import{X as ee}from"./dialog-3ysF2mkX.js";import"./v4-CtRu48qb.js";import"./index-BiAv9jRD.js";import"./index-aKoabQ1X.js";import"./index-VDvXe9nZ.js";import"./index-CqVsPxxY.js";import"./Combination-BCojpehm.js";import"./index-5epIGEb9.js";import"./createLucideIcon-DirO1-NP.js";function E(t,o){return o.find(n=>t===n.value)}const h=({defaultOptions:t=[],placeholder:o,emptyIndicator:n,value:i,onChange:r,disabled:R,debounceDelay:I=500,onSearch:u,className:K})=>{const c=s.useRef(null),[y,j]=s.useState(!1),[v,V]=s.useState(!1),[m,f]=s.useState(E(i,t)),[x,F]=s.useState(t),[B,d]=s.useState(""),[L,M]=s.useState(""),w=H(L,I),W=s.useCallback(e=>{const l=c.current;if(l){if(y||j(!0),e.key==="Enter"&&l.value!==""){const p=x.find(G=>G.label===l.value);p&&(f(p),r==null||r(p.value))}e.key==="Escape"&&l.blur()}},[y,x,r]),_=s.useCallback(()=>{j(!1),d((m==null?void 0:m.label)||"")},[m]),z=s.useCallback(e=>{d(e.label),f(e),r==null||r(e.value),setTimeout(()=>{var l;(l=c==null?void 0:c.current)==null||l.blur()},0)},[r]);return s.useEffect(()=>{if(i&&t.length>0){const e=E(i,t);f(e),d((e==null?void 0:e.label)||"")}},[i,t]),s.useEffect(()=>{const e=async()=>{V(!0);const p=await(u==null?void 0:u(w));F(p||[]),V(!1)};(async()=>{!u||!open||w&&await e()})()},[w,open]),a.jsxs(A,{onKeyDown:W,className:K,shouldFilter:!u,children:[a.jsx("div",{className:"relative",children:a.jsx(J,{ref:c,value:B,onValueChange:v?void 0:e=>{d(e),M(e)},onBlur:_,onFocus:()=>j(!0),placeholder:o,disabled:R,className:"text-base",rightAddon:a.jsx("button",{type:"button",onClick:()=>{f(void 0),d(""),r==null||r(void 0)},className:T("h-[26px] p-0",{hidden:!m||R}),children:a.jsx(ee,{size:18,className:""})})})}),a.jsx("div",{className:"relative mt-1",children:a.jsx("div",{className:T("animate-in fade-in-0 zoom-in-95 absolute top-0 z-10 w-full rounded-xl bg-popover outline-none shadow-md",y?"block":"hidden"),children:a.jsxs(Q,{className:"rounded-lg border border-border",children:[v?a.jsx(A.Loading,{children:a.jsx("div",{className:"p-1",children:a.jsx(U,{className:"h-8 w-full"})})}):null,x.length>0&&!v?a.jsx(Y,{children:x.map(e=>a.jsx(Z,{value:e.label,onMouseDown:l=>{l.preventDefault(),l.stopPropagation()},onSelect:()=>z(e),className:"cursor-pointer",children:e.label},e.value))}):null,!v&&a.jsx($,{children:n||a.jsx("div",{className:"text-center text-sm",children:"No data"})})]})})})]})};h.__docgenInfo={description:"",methods:[],displayName:"AutoComplete",props:{defaultOptions:{required:!1,tsType:{name:"Array",elements:[{name:"intersection",raw:'Record<"value" | "label", string> & Record<string, string>',elements:[{name:"Record",elements:[{name:"union",raw:'"value" | "label"',elements:[{name:"literal",value:'"value"'},{name:"literal",value:'"label"'}]},{name:"string"}],raw:'Record<"value" | "label", string>'},{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"}]}],raw:"Option[]"},description:"",defaultValue:{value:"[]",computed:!1}},emptyIndicator:{required:!1,tsType:{name:"ReactNode"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => Promise<Option[]>",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"Promise",elements:[{name:"Array",elements:[{name:"intersection",raw:'Record<"value" | "label", string> & Record<string, string>',elements:[{name:"Record",elements:[{name:"union",raw:'"value" | "label"',elements:[{name:"literal",value:'"value"'},{name:"literal",value:'"label"'}]},{name:"string"}],raw:'Record<"value" | "label", string>'},{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"}]}],raw:"Option[]"}],raw:"Promise<Option[]>"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},debounceDelay:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}}}};const N=[{value:"next.js",label:"Next.js"},{value:"sveltekit",label:"SvelteKit"},{value:"nuxt.js",label:"Nuxt.js"},{value:"remix",label:"Remix"},{value:"astro",label:"Astro"},{value:"wordpress",label:"WordPress"},{value:"express.js",label:"Express.js"},{value:"nest.js",label:"Nest.js"}],xe={title:"Base/Data Entry/Inputs/Auto Complete",component:h,args:{value:"",defaultOptions:N,onChange:X(),placeholder:"Placeholder"}},b={render:()=>{const[t,o]=s.useState("nest.js");return a.jsx(h,{value:t,onChange:n=>{o(n),S("onChange")(n)},className:"max-w-[300px]",placeholder:"Placeholder",defaultOptions:N})}},g={render:()=>{const[t,o]=s.useState("");return a.jsx(h,{value:t,onChange:n=>{o(n),S("onChange")(n)},onSearch:async n=>(S("onSearch")(n),new Promise(i=>{setTimeout(()=>i(N),1e3)})),debounceDelay:300,className:"max-w-[300px]",placeholder:"Placeholder"})}};var P,D,C;b.parameters={...b.parameters,docs:{...(P=b.parameters)==null?void 0:P.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState<string | undefined>("nest.js");
    return <AutoComplete value={value} onChange={value => {
      setValue(value);
      action("onChange")(value);
    }} className="max-w-[300px]" placeholder="Placeholder" defaultOptions={FRAMEWORKS} />;
  }
}`,...(C=(D=b.parameters)==null?void 0:D.docs)==null?void 0:C.source}}};var O,k,q;g.parameters={...g.parameters,docs:{...(O=g.parameters)==null?void 0:O.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState<string | undefined>("");
    return <AutoComplete value={value} onChange={value => {
      setValue(value);
      action("onChange")(value);
    }} onSearch={async searchValue => {
      action("onSearch")(searchValue);
      return new Promise(resolve => {
        setTimeout(() => resolve(FRAMEWORKS), 1000);
      });
    }} debounceDelay={300} className="max-w-[300px]" placeholder="Placeholder" />;
  }
}`,...(q=(k=g.parameters)==null?void 0:k.docs)==null?void 0:q.source}}};const be=["Default","Async"];export{g as Async,b as Default,be as __namedExportsOrder,xe as default};

import{j as $}from"./jsx-runtime-D_zvdyIk.js";import{R as Me,P as $e,O as je,a as De}from"./index-Bn1uQpHS.js";import{r as l}from"./index-CTzypqlY.js";import{P as N,h as T}from"./index-DSqg7KUl.js";import{u as F}from"./index-CqHHZPb-.js";import{c as j}from"./utils-bRKmu4jq.js";import"./dialog-DvWdWQke.js";var me=1,_e=.9,qe=.8,Pe=.17,ee=.1,te=.999,Fe=.9999,Ke=.99,Le=/[\\\/_+.#"@\[\(\{&]/,Te=/[\\\/_+.#"@\[\(\{&]/g,Ve=/[\s-]/,ge=/[\s-]/g;function ne(e,n,r,c,a,i,s){if(i===n.length)return a===e.length?me:Ke;var m=`${a},${i}`;if(s[m]!==void 0)return s[m];for(var b=c.charAt(i),u=r.indexOf(b,a),v=0,g,I,w,S;u>=0;)g=ne(e,n,r,c,u+1,i+1,s),g>v&&(u===a?g*=me:Le.test(e.charAt(u-1))?(g*=qe,w=e.slice(a,u-1).match(Te),w&&a>0&&(g*=Math.pow(te,w.length))):Ve.test(e.charAt(u-1))?(g*=_e,S=e.slice(a,u-1).match(ge),S&&a>0&&(g*=Math.pow(te,S.length))):(g*=Pe,a>0&&(g*=Math.pow(te,u-a))),e.charAt(u)!==n.charAt(i)&&(g*=Fe)),(g<ee&&r.charAt(u-1)===c.charAt(i+1)||c.charAt(i+1)===c.charAt(i)&&r.charAt(u-1)!==c.charAt(i))&&(I=ne(e,n,r,c,u+1,i+2,s),I*ee>g&&(g=I*ee)),g>v&&(v=g),u=r.indexOf(b,u+1);return s[m]=v,v}function pe(e){return e.toLowerCase().replace(ge," ")}function Oe(e,n,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,ne(e,n,pe(e),pe(n),0,0,{})}var L='[cmdk-group=""]',re='[cmdk-group-items=""]',ze='[cmdk-group-heading=""]',he='[cmdk-item=""]',ve=`${he}:not([aria-disabled="true"])`,le="cmdk-item-select",q="data-value",Be=(e,n,r)=>Oe(e,n,r),be=l.createContext(void 0),V=()=>l.useContext(be),ye=l.createContext(void 0),ae=()=>l.useContext(ye),xe=l.createContext(void 0),we=l.forwardRef((e,n)=>{let r=P(()=>{var t,d;return{search:"",value:(d=(t=e.value)!=null?t:e.defaultValue)!=null?d:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),c=P(()=>new Set),a=P(()=>new Map),i=P(()=>new Map),s=P(()=>new Set),m=ke(e),{label:b,children:u,value:v,onValueChange:g,filter:I,shouldFilter:w,loop:S,disablePointerSelection:G=!1,vimBindings:A=!0,...O}=e,U=F(),oe=F(),H=F(),M=l.useRef(null),y=tt();D(()=>{if(v!==void 0){let t=v.trim();r.current.value=t,k.emit()}},[v]),D(()=>{y(6,ie)},[]);let k=l.useMemo(()=>({subscribe:t=>(s.current.add(t),()=>s.current.delete(t)),snapshot:()=>r.current,setState:(t,d,f)=>{var o,p,h,E;if(!Object.is(r.current[t],d)){if(r.current[t]=d,t==="search")Y(),J(),y(1,X);else if(t==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let x=document.getElementById(H);x?x.focus():(o=document.getElementById(U))==null||o.focus()}if(y(7,()=>{var x;r.current.selectedItemId=(x=_())==null?void 0:x.id,k.emit()}),f||y(5,ie),((p=m.current)==null?void 0:p.value)!==void 0){let x=d??"";(E=(h=m.current).onValueChange)==null||E.call(h,x);return}}k.emit()}},emit:()=>{s.current.forEach(t=>t())}}),[]),W=l.useMemo(()=>({value:(t,d,f)=>{var o;d!==((o=i.current.get(t))==null?void 0:o.value)&&(i.current.set(t,{value:d,keywords:f}),r.current.filtered.items.set(t,ue(d,f)),y(2,()=>{J(),k.emit()}))},item:(t,d)=>(c.current.add(t),d&&(a.current.has(d)?a.current.get(d).add(t):a.current.set(d,new Set([t]))),y(3,()=>{Y(),J(),r.current.value||X(),k.emit()}),()=>{i.current.delete(t),c.current.delete(t),r.current.filtered.items.delete(t);let f=_();y(4,()=>{Y(),(f==null?void 0:f.getAttribute("id"))===t&&X(),k.emit()})}),group:t=>(a.current.has(t)||a.current.set(t,new Set),()=>{i.current.delete(t),a.current.delete(t)}),filter:()=>m.current.shouldFilter,label:b||e["aria-label"],getDisablePointerSelection:()=>m.current.disablePointerSelection,listId:U,inputId:H,labelId:oe,listInnerRef:M}),[]);function ue(t,d){var f,o;let p=(o=(f=m.current)==null?void 0:f.filter)!=null?o:Be;return t?p(t,r.current.search,d):0}function J(){if(!r.current.search||m.current.shouldFilter===!1)return;let t=r.current.filtered.items,d=[];r.current.filtered.groups.forEach(o=>{let p=a.current.get(o),h=0;p.forEach(E=>{let x=t.get(E);h=Math.max(x,h)}),d.push([o,h])});let f=M.current;K().sort((o,p)=>{var h,E;let x=o.getAttribute("id"),z=p.getAttribute("id");return((h=t.get(z))!=null?h:0)-((E=t.get(x))!=null?E:0)}).forEach(o=>{let p=o.closest(re);p?p.appendChild(o.parentElement===p?o:o.closest(`${re} > *`)):f.appendChild(o.parentElement===f?o:o.closest(`${re} > *`))}),d.sort((o,p)=>p[1]-o[1]).forEach(o=>{var p;let h=(p=M.current)==null?void 0:p.querySelector(`${L}[${q}="${encodeURIComponent(o[0])}"]`);h==null||h.parentElement.appendChild(h)})}function X(){let t=K().find(f=>f.getAttribute("aria-disabled")!=="true"),d=t==null?void 0:t.getAttribute(q);k.setState("value",d||void 0)}function Y(){var t,d,f,o;if(!r.current.search||m.current.shouldFilter===!1){r.current.filtered.count=c.current.size;return}r.current.filtered.groups=new Set;let p=0;for(let h of c.current){let E=(d=(t=i.current.get(h))==null?void 0:t.value)!=null?d:"",x=(o=(f=i.current.get(h))==null?void 0:f.keywords)!=null?o:[],z=ue(E,x);r.current.filtered.items.set(h,z),z>0&&p++}for(let[h,E]of a.current)for(let x of E)if(r.current.filtered.items.get(x)>0){r.current.filtered.groups.add(h);break}r.current.filtered.count=p}function ie(){var t,d,f;let o=_();o&&(((t=o.parentElement)==null?void 0:t.firstChild)===o&&((f=(d=o.closest(L))==null?void 0:d.querySelector(ze))==null||f.scrollIntoView({block:"nearest"})),o.scrollIntoView({block:"nearest"}))}function _(){var t;return(t=M.current)==null?void 0:t.querySelector(`${he}[aria-selected="true"]`)}function K(){var t;return Array.from(((t=M.current)==null?void 0:t.querySelectorAll(ve))||[])}function Q(t){let d=K()[t];d&&k.setState("value",d.getAttribute(q))}function Z(t){var d;let f=_(),o=K(),p=o.findIndex(E=>E===f),h=o[p+t];(d=m.current)!=null&&d.loop&&(h=p+t<0?o[o.length-1]:p+t===o.length?o[0]:o[p+t]),h&&k.setState("value",h.getAttribute(q))}function de(t){let d=_(),f=d==null?void 0:d.closest(L),o;for(;f&&!o;)f=t>0?Ze(f,L):et(f,L),o=f==null?void 0:f.querySelector(ve);o?k.setState("value",o.getAttribute(q)):Z(t)}let ce=()=>Q(K().length-1),se=t=>{t.preventDefault(),t.metaKey?ce():t.altKey?de(1):Z(1)},fe=t=>{t.preventDefault(),t.metaKey?Q(0):t.altKey?de(-1):Z(-1)};return l.createElement(N.div,{ref:n,tabIndex:-1,...O,"cmdk-root":"",onKeyDown:t=>{var d;(d=O.onKeyDown)==null||d.call(O,t);let f=t.nativeEvent.isComposing||t.keyCode===229;if(!(t.defaultPrevented||f))switch(t.key){case"n":case"j":{A&&t.ctrlKey&&se(t);break}case"ArrowDown":{se(t);break}case"p":case"k":{A&&t.ctrlKey&&fe(t);break}case"ArrowUp":{fe(t);break}case"Home":{t.preventDefault(),Q(0);break}case"End":{t.preventDefault(),ce();break}case"Enter":{t.preventDefault();let o=_();if(o){let p=new Event(le);o.dispatchEvent(p)}}}}},l.createElement("label",{"cmdk-label":"",htmlFor:W.inputId,id:W.labelId,style:nt},b),B(e,t=>l.createElement(ye.Provider,{value:k},l.createElement(be.Provider,{value:W},t))))}),Ge=l.forwardRef((e,n)=>{var r,c;let a=F(),i=l.useRef(null),s=l.useContext(xe),m=V(),b=ke(e),u=(c=(r=b.current)==null?void 0:r.forceMount)!=null?c:s==null?void 0:s.forceMount;D(()=>{if(!u)return m.item(a,s==null?void 0:s.id)},[u]);let v=Ee(a,i,[e.value,e.children,i],e.keywords),g=ae(),I=C(y=>y.value&&y.value===v.current),w=C(y=>u||m.filter()===!1?!0:y.search?y.filtered.items.get(a)>0:!0);l.useEffect(()=>{let y=i.current;if(!(!y||e.disabled))return y.addEventListener(le,S),()=>y.removeEventListener(le,S)},[w,e.onSelect,e.disabled]);function S(){var y,k;G(),(k=(y=b.current).onSelect)==null||k.call(y,v.current)}function G(){g.setState("value",v.current,!0)}if(!w)return null;let{disabled:A,value:O,onSelect:U,forceMount:oe,keywords:H,...M}=e;return l.createElement(N.div,{ref:T(i,n),...M,id:a,"cmdk-item":"",role:"option","aria-disabled":!!A,"aria-selected":!!I,"data-disabled":!!A,"data-selected":!!I,onPointerMove:A||m.getDisablePointerSelection()?void 0:G,onClick:A?void 0:S},e.children)}),Ue=l.forwardRef((e,n)=>{let{heading:r,children:c,forceMount:a,...i}=e,s=F(),m=l.useRef(null),b=l.useRef(null),u=F(),v=V(),g=C(w=>a||v.filter()===!1?!0:w.search?w.filtered.groups.has(s):!0);D(()=>v.group(s),[]),Ee(s,m,[e.value,e.heading,b]);let I=l.useMemo(()=>({id:s,forceMount:a}),[a]);return l.createElement(N.div,{ref:T(m,n),...i,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},r&&l.createElement("div",{ref:b,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),B(e,w=>l.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},l.createElement(xe.Provider,{value:I},w))))}),He=l.forwardRef((e,n)=>{let{alwaysRender:r,...c}=e,a=l.useRef(null),i=C(s=>!s.search);return!r&&!i?null:l.createElement(N.div,{ref:T(a,n),...c,"cmdk-separator":"",role:"separator"})}),We=l.forwardRef((e,n)=>{let{onValueChange:r,...c}=e,a=e.value!=null,i=ae(),s=C(u=>u.search),m=C(u=>u.selectedItemId),b=V();return l.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),l.createElement(N.input,{ref:n,...c,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":b.listId,"aria-labelledby":b.labelId,"aria-activedescendant":m,id:b.inputId,type:"text",value:a?e.value:s,onChange:u=>{a||i.setState("search",u.target.value),r==null||r(u.target.value)}})}),Je=l.forwardRef((e,n)=>{let{children:r,label:c="Suggestions",...a}=e,i=l.useRef(null),s=l.useRef(null),m=C(u=>u.selectedItemId),b=V();return l.useEffect(()=>{if(s.current&&i.current){let u=s.current,v=i.current,g,I=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let w=u.offsetHeight;v.style.setProperty("--cmdk-list-height",w.toFixed(1)+"px")})});return I.observe(u),()=>{cancelAnimationFrame(g),I.unobserve(u)}}},[]),l.createElement(N.div,{ref:T(i,n),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":m,"aria-label":c,id:b.listId},B(e,u=>l.createElement("div",{ref:T(s,b.listInnerRef),"cmdk-list-sizer":""},u)))}),Xe=l.forwardRef((e,n)=>{let{open:r,onOpenChange:c,overlayClassName:a,contentClassName:i,container:s,...m}=e;return l.createElement(Me,{open:r,onOpenChange:c},l.createElement($e,{container:s},l.createElement(je,{"cmdk-overlay":"",className:a}),l.createElement(De,{"aria-label":e.label,"cmdk-dialog":"",className:i},l.createElement(we,{ref:n,...m}))))}),Ye=l.forwardRef((e,n)=>C(r=>r.filtered.count===0)?l.createElement(N.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),Qe=l.forwardRef((e,n)=>{let{progress:r,children:c,label:a="Loading...",...i}=e;return l.createElement(N.div,{ref:n,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},B(e,s=>l.createElement("div",{"aria-hidden":!0},s)))}),R=Object.assign(we,{List:Je,Item:Ge,Input:We,Group:Ue,Separator:He,Dialog:Xe,Empty:Ye,Loading:Qe});function Ze(e,n){let r=e.nextElementSibling;for(;r;){if(r.matches(n))return r;r=r.nextElementSibling}}function et(e,n){let r=e.previousElementSibling;for(;r;){if(r.matches(n))return r;r=r.previousElementSibling}}function ke(e){let n=l.useRef(e);return D(()=>{n.current=e}),n}var D=typeof window>"u"?l.useEffect:l.useLayoutEffect;function P(e){let n=l.useRef();return n.current===void 0&&(n.current=e()),n}function C(e){let n=ae(),r=()=>e(n.snapshot());return l.useSyncExternalStore(n.subscribe,r,r)}function Ee(e,n,r,c=[]){let a=l.useRef(),i=V();return D(()=>{var s;let m=(()=>{var u;for(let v of r){if(typeof v=="string")return v.trim();if(typeof v=="object"&&"current"in v)return v.current?(u=v.current.textContent)==null?void 0:u.trim():a.current}})(),b=c.map(u=>u.trim());i.value(e,m,b),(s=n.current)==null||s.setAttribute(q,m),a.current=m}),a}var tt=()=>{let[e,n]=l.useState(),r=P(()=>new Map);return D(()=>{r.current.forEach(c=>c()),r.current=new Map},[e]),(c,a)=>{r.current.set(c,a),n({})}};function rt(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function B({asChild:e,children:n},r){return e&&l.isValidElement(n)?l.cloneElement(rt(n),{ref:n.ref},r(n.props.children)):r(n)}var nt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Ie({className:e,...n}){return $.jsx(R,{className:j("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...n})}Ie.displayName=R.displayName;function Re({className:e,wrapperClassName:n,leftAddon:r,rightAddon:c,disabled:a,...i}){return $.jsxs("div",{className:j("flex h-9 items-center px-3 bg-background rounded-md border border-input enabled:focus-within:ring-1 enabled:focus-within:ring-ring",n,{"cursor-not-allowed opacity-50":a}),"cmdk-input-wrapper":"",children:[r,$.jsx(R.Input,{className:j("flex w-full rounded-md bg-background text-sm outline-none placeholder:text-muted-foreground",e),disabled:a,...i}),c]})}Re.displayName=R.Input.displayName;function Ce({className:e,...n}){return $.jsx(R.List,{className:j("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...n})}Ce.displayName=R.List.displayName;function Se({className:e,...n}){return C(c=>c.filtered.count===0)?$.jsx("div",{className:j("py-4 text-center text-sm",e),"cmdk-empty":"",role:"presentation",...n}):null}Se.displayName=R.Empty.displayName;function Ne({className:e,...n}){return $.jsx(R.Group,{className:j("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...n})}Ne.displayName=R.Group.displayName;R.Separator.displayName;function Ae({className:e,...n}){return $.jsx(R.Item,{className:j("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...n})}Ae.displayName=R.Item.displayName;Ie.__docgenInfo={description:"",methods:[]};Re.__docgenInfo={description:"",methods:[],props:{wrapperClassName:{required:!1,tsType:{name:"string"},description:""},rightAddon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},leftAddon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};Ce.__docgenInfo={description:"",methods:[]};Se.__docgenInfo={description:"",methods:[]};Ne.__docgenInfo={description:"",methods:[]};Ae.__docgenInfo={description:"",methods:[]};function st(e,n){const[r,c]=l.useState(e);return l.useEffect(()=>{const a=setTimeout(()=>c(e),n||500);return()=>{clearTimeout(a)}},[e,n]),r}function ft(e,n){let r;return(...c)=>(clearTimeout(r),new Promise(a=>{r=setTimeout(()=>{a(e(...c))},n)}))}export{Re as C,R as _,Ce as a,Ne as b,Ae as c,Se as d,Ie as e,ft as f,st as u};

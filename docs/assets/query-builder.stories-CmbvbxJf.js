import{j as t}from"./jsx-runtime-Cf8x2fCZ.js";import{f as h}from"./index-BZkcKs8Z.js";import{a as _e}from"./index-B-lxVbXh.js";import{g as vi,d as gi,Q as at,e as xi,q as L,f as st,h as Ci,i as bi,j as Pi,k as ji,l as qi,u as Si,S as le,m as lt,T as ct,B as O,n as Qi,o as It,p as wi,s as ki,t as Ii,v as Fi,w as B}from"./query-builder-remote-BIxcuZcY.js";import{r as d,R as S,g as Di}from"./index-tvICUrOf.js";import{u as ce}from"./i18n-ClbQH7w5.js";import{u as Be,c as Ft,P as de,b as Re,a as V,f as Ai}from"./index-Csi1vtvD.js";import{i as Ni,u as _i,C as Dt}from"./dropdown-menu-BtHca8-r.js";import{c as At,R as Ti,T as Oi,b as Ei}from"./index-Ct3W0jEN.js";import{u as Nt,P as Bi,h as Ri,R as Mi,a as Li,F as Vi,D as Ui}from"./Combination-CmKP2mMJ.js";import{c as q}from"./utils-CytzSlOG.js";import{B as v}from"./button-UnRZVMn5.js";import{c as z}from"./createLucideIcon-DKFpjrVJ.js";import{c as _t,R as zi,A as Tt,C as $i,a as Hi}from"./index-CueSDTQu.js";import{P as Ot}from"./index-pLOVI5Ig.js";import{T as Et,C as Wi,S as Yi,a as Gi,L as Xi}from"./list-item-with-action-LlaTCV7Y.js";import{a as D,b as A,T as N}from"./tooltip-Dvtjdji1.js";import{D as ue,a as me,b as pe,c as he,d as fe,e as ye}from"./dialog-CsMtKPah.js";import{t as R,n as Me,g as dt,a as Ji,e as Ki,m as ut,b as ee,u as Bt,s as Rt,F as Mt,c as Lt,d as Vt,f as Ut,h as zt,i as $t,z as oe,r as Zi,j as er,k as Te,P as Ht,l as Y,o as G,p as tr,q as qe}from"./en-US-BfxBxfab.js";import{I as Le}from"./input-BBA0CWHH.js";import{S as nr}from"./spinner-Bn71UZIB.js";import{n as ir}from"./number-format-BmdRvOec.js";import{C as rr}from"./checkbox-DR5AvqL2.js";import{c as or}from"./index-C66Dxnp2.js";import{E as ar,a as Ve,L as sr,b as lr,G as cr,c as dr}from"./less-than-or-equal-operator-icon-BeMEXZ7b.js";import{N as ur}from"./not-in-operator-icon-C8Fl8SMz.js";import{S as P}from"./api-CkzL9HmQ.js";import{C as mr}from"./chevron-left-DVgRToGC.js";import{X as pr}from"./x-DA4wTodG.js";import{S as hr}from"./separator-yfEj2UAP.js";import{a as $}from"./alert-dialog-store-CZoSfA8g.js";import{A as fr}from"./ActionButton-C_4cAaVG.js";import"./button.variants-B79LQKoe.js";import{S as yr}from"./switch-DOzXzNmJ.js";import{S as vr,a as gr,c as xr,d as Cr,e as br}from"./select-BAz5cXZu.js";import{U as Pr}from"./user-Id7UOoFp.js";import"./index-yBjzXJbu.js";import"./v4-CtRu48qb.js";import"./iframe-EoR29XVQ.js";import"./index-_r67kdfS.js";import"./index-fNjTmf9T.js";import"./check-CfPT3E_d.js";import"./index-DJkr1wGX.js";import"./pen-DKQSveoi.js";import"./index-Bwb5bU54.js";import"./index-BNc2EN3H.js";import"./label-BX6-Aqla.js";import"./info-CHGlDBvT.js";import"./index-C1xbsqtW.js";import"./ellipsis-NIzCCAdy.js";import"./chevron-down-D97Dr_NX.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Wt=z("Copy",jr);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Sr=z("Folder",qr);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],Ue=z("PencilLine",Qr);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],kr=z("RotateCcw",wr);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Yt=z("Save",Ir);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Dr=z("Star",Fr);function re(e,i){const n=+R(e)-+R(i);return n<0?-1:n>0?1:n}function Ar(e,i,n){const[r,o]=Me(n==null?void 0:n.in,e,i),a=r.getFullYear()-o.getFullYear(),l=r.getMonth()-o.getMonth();return a*12+l}function Nr(e){return i=>{const r=(e?Math[e]:Math.trunc)(i);return r===0?0:r}}function _r(e,i){return+R(e)-+R(i)}function Tr(e,i){const n=R(e,i==null?void 0:i.in);return n.setHours(23,59,59,999),n}function Or(e,i){const n=R(e,i==null?void 0:i.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Er(e,i){const n=R(e,i==null?void 0:i.in);return+Tr(n,i)==+Or(n,i)}function Br(e,i,n){const[r,o,a]=Me(n==null?void 0:n.in,e,e,i),l=re(o,a),s=Math.abs(Ar(o,a));if(s<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-l*s);let c=re(o,a)===-l;Er(r)&&s===1&&re(r,a)===1&&(c=!1);const u=l*(s-+c);return u===0?0:u}function Rr(e,i,n){const r=_r(e,i)/1e3;return Nr(n==null?void 0:n.roundingMethod)(r)}function Mr(e,i,n){const r=Ji(),o=(n==null?void 0:n.locale)??r.locale??Ki,a=2520,l=re(e,i);if(isNaN(l))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l}),[c,u]=Me(n==null?void 0:n.in,...l>0?[i,e]:[e,i]),m=Rr(u,c),f=(dt(u)-dt(c))/1e3,p=Math.round((m-f)/60);let y;if(p<2)return n!=null&&n.includeSeconds?m<5?o.formatDistance("lessThanXSeconds",5,s):m<10?o.formatDistance("lessThanXSeconds",10,s):m<20?o.formatDistance("lessThanXSeconds",20,s):m<40?o.formatDistance("halfAMinute",0,s):m<60?o.formatDistance("lessThanXMinutes",1,s):o.formatDistance("xMinutes",1,s):p===0?o.formatDistance("lessThanXMinutes",1,s):o.formatDistance("xMinutes",p,s);if(p<45)return o.formatDistance("xMinutes",p,s);if(p<90)return o.formatDistance("aboutXHours",1,s);if(p<ut){const C=Math.round(p/60);return o.formatDistance("aboutXHours",C,s)}else{if(p<a)return o.formatDistance("xDays",1,s);if(p<ee){const C=Math.round(p/ut);return o.formatDistance("xDays",C,s)}else if(p<ee*2)return y=Math.round(p/ee),o.formatDistance("aboutXMonths",y,s)}if(y=Br(u,c),y<12){const C=Math.round(p/ee);return o.formatDistance("xMonths",C,s)}else{const C=y%12,k=Math.trunc(y/12);return C<3?o.formatDistance("aboutXYears",k,s):C<9?o.formatDistance("overXYears",k,s):o.formatDistance("almostXYears",k+1,s)}}function Gt(e){const{t:i}=ce("common"),n={state:{...vi(),savedFilters:[],selectedQueryIndexes:[]},onStateChange:()=>{},...e},[r]=d.useState(()=>({current:gi(n)})),[o,a]=d.useState(()=>n.initialState||n.state);d.useEffect(()=>{var s;o&&((s=e.onStateChange)==null||s.call(e,o))},[o]),d.useEffect(()=>{const s=c=>{var u,m,f,p;if(c.queryBuilderId===e.id){if(c.eventType===st.ADD_QUERY){const y=c.eventData;(u=e.onQueryCreate)==null||u.call(e,y),y.id===c.value.activeQueryId&&((m=e.onActiveQueryChange)==null||m.call(e,y))}else if(c.eventType===st.UPDATE_QUERY){const y=c.eventData;(f=e.onQueryUpdate)==null||f.call(e,y),y.id===c.value.activeQueryId&&((p=e.onActiveQueryChange)==null||p.call(e,y))}a(y=>({...y,...e.state,...c.value}))}};return window.addEventListener(at,s),()=>{window.removeEventListener(at,s)}},[e.state]),e.fieldsToIgnore;const l={...o,...e.state};return r.current.setCoreProps(s=>({savedFilterDefaultTitle:i("common.savedFilter.untitledFilter"),...s,...e,state:{...l,queries:e.fieldsToIgnore&&l.queries?xi(l.queries,e.fieldsToIgnore):l.queries},onStateChange:c=>{a(c),L.setLocalQueryBuilderState(e.id,{value:c,skipEvent:!0})}})),r.current}var F="Accordion",Lr=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ze,Vr,Ur]=Ni(F),[ve,ss]=Ft(F,[Ur,At]),$e=At(),Xt=S.forwardRef((e,i)=>{const{type:n,...r}=e,o=r,a=r;return t.jsx(ze.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?t.jsx(Wr,{...a,ref:i}):t.jsx(Hr,{...o,ref:i})})});Xt.displayName=F;var[Jt,zr]=ve(F),[Kt,$r]=ve(F,{collapsible:!1}),Hr=S.forwardRef((e,i)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:a=!1,...l}=e,[s,c]=Be({prop:n,defaultProp:r??"",onChange:o,caller:F});return t.jsx(Jt,{scope:e.__scopeAccordion,value:S.useMemo(()=>s?[s]:[],[s]),onItemOpen:c,onItemClose:S.useCallback(()=>a&&c(""),[a,c]),children:t.jsx(Kt,{scope:e.__scopeAccordion,collapsible:a,children:t.jsx(Zt,{...l,ref:i})})})}),Wr=S.forwardRef((e,i)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[l,s]=Be({prop:n,defaultProp:r??[],onChange:o,caller:F}),c=S.useCallback(m=>s((f=[])=>[...f,m]),[s]),u=S.useCallback(m=>s((f=[])=>f.filter(p=>p!==m)),[s]);return t.jsx(Jt,{scope:e.__scopeAccordion,value:l,onItemOpen:c,onItemClose:u,children:t.jsx(Kt,{scope:e.__scopeAccordion,collapsible:!0,children:t.jsx(Zt,{...a,ref:i})})})}),[Yr,ge]=ve(F),Zt=S.forwardRef((e,i)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:a="vertical",...l}=e,s=S.useRef(null),c=Re(s,i),u=Vr(n),f=_i(o)==="ltr",p=V(e.onKeyDown,y=>{var rt;if(!Lr.includes(y.key))return;const C=y.target,k=u().filter(je=>{var ot;return!((ot=je.ref.current)!=null&&ot.disabled)}),_=k.findIndex(je=>je.ref.current===C),j=k.length;if(_===-1)return;y.preventDefault();let b=_;const T=0,I=j-1,W=()=>{b=_+1,b>I&&(b=T)},M=()=>{b=_-1,b<T&&(b=I)};switch(y.key){case"Home":b=T;break;case"End":b=I;break;case"ArrowRight":a==="horizontal"&&(f?W():M());break;case"ArrowDown":a==="vertical"&&W();break;case"ArrowLeft":a==="horizontal"&&(f?M():W());break;case"ArrowUp":a==="vertical"&&M();break}const yi=b%j;(rt=k[yi].ref.current)==null||rt.focus()});return t.jsx(Yr,{scope:n,disabled:r,direction:o,orientation:a,children:t.jsx(ze.Slot,{scope:n,children:t.jsx(de.div,{...l,"data-orientation":a,ref:c,onKeyDown:r?void 0:p})})})}),ae="AccordionItem",[Gr,He]=ve(ae),en=S.forwardRef((e,i)=>{const{__scopeAccordion:n,value:r,...o}=e,a=ge(ae,n),l=zr(ae,n),s=$e(n),c=Nt(),u=r&&l.value.includes(r)||!1,m=a.disabled||e.disabled;return t.jsx(Gr,{scope:n,open:u,disabled:m,triggerId:c,children:t.jsx(Ti,{"data-orientation":a.orientation,"data-state":sn(u),...s,...o,ref:i,disabled:m,open:u,onOpenChange:f=>{f?l.onItemOpen(r):l.onItemClose(r)}})})});en.displayName=ae;var tn="AccordionHeader",nn=S.forwardRef((e,i)=>{const{__scopeAccordion:n,...r}=e,o=ge(F,n),a=He(tn,n);return t.jsx(de.h3,{"data-orientation":o.orientation,"data-state":sn(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:i})});nn.displayName=tn;var Oe="AccordionTrigger",rn=S.forwardRef((e,i)=>{const{__scopeAccordion:n,...r}=e,o=ge(F,n),a=He(Oe,n),l=$r(Oe,n),s=$e(n);return t.jsx(ze.ItemSlot,{scope:n,children:t.jsx(Oi,{"aria-disabled":a.open&&!l.collapsible||void 0,"data-orientation":o.orientation,id:a.triggerId,...s,...r,ref:i})})});rn.displayName=Oe;var on="AccordionContent",an=S.forwardRef((e,i)=>{const{__scopeAccordion:n,...r}=e,o=ge(F,n),a=He(on,n),l=$e(n);return t.jsx(Ei,{role:"region","aria-labelledby":a.triggerId,"data-orientation":o.orientation,...l,...r,ref:i,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});an.displayName=on;function sn(e){return e?"open":"closed"}var Xr=Xt,Jr=en,Kr=nn,ln=rn,cn=an;const Zr=Xr,We=d.forwardRef(({className:e,...i},n)=>t.jsx(Jr,{ref:n,className:q("border-b",e),...i}));We.displayName="AccordionItem";const Ye=d.forwardRef(({className:e,children:i,...n},r)=>t.jsx(Kr,{className:"flex justify-between items-center",children:t.jsx(ln,{ref:r,className:q("py-2 transition-all group w-full",e),...n,children:t.jsxs("div",{className:"flex flex-1 items-center",children:[t.jsx("div",{children:t.jsx(Dt,{className:"h-4 w-4 shrink-0 group-data-[state=open]:rotate-90 transition-transform duration-200 mr-2"})}),i]})})}));Ye.displayName=ln.displayName;const Ge=d.forwardRef(({className:e,children:i,...n},r)=>t.jsx(cn,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:t.jsx("div",{className:q("pb-2 pt-0",e),children:i})}));Ge.displayName=cn.displayName;We.__docgenInfo={description:"",methods:[],displayName:"AccordionItem"};Ye.__docgenInfo={description:"",methods:[]};Ge.__docgenInfo={description:"",methods:[]};const Xe=d.createContext(null);function x(){const e=d.useContext(Xe);if(!e)throw new Error("useQueryBuilderContext must be used within a QueryBuilderContextProvider");return e}const dn=d.createContext(null);function g(){const e=d.useContext(dn);if(!e)throw new Error("useQueryBuilderDictContext must be used within a QueryBuilderDictContextProvider");return e}const Je=d.createContext(null);function w(){const e=d.useContext(Je);if(!e)throw new Error("useQueryBarContext must be used within a QueryBarContextProvider");return e}function un(){const{query:e}=w(),{getQueryReferenceColor:i}=x(),n=e.isReferencedInActiveQuery()?i(e.index()):null;return t.jsx("div",{className:"w-1 rounded-s-sm bg-muted-foreground group-data-[query-active=true]/query:bg-primary",style:n?{backgroundColor:n}:{}})}un.__docgenInfo={description:"",methods:[],displayName:"QueryBarIdentifier"};function mn(){const{query:e}=w();return t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",onClick:()=>e.duplicate(),children:t.jsx(Wt,{})})}mn.__docgenInfo={description:"",methods:[],displayName:"QueryBarDuplicateAction"};var xe="Popover",[pn,ls]=Ft(xe,[_t]),J=_t(),[eo,E]=pn(xe),hn=e=>{const{__scopePopover:i,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:l=!1}=e,s=J(i),c=d.useRef(null),[u,m]=d.useState(!1),[f,p]=Be({prop:r,defaultProp:o??!1,onChange:a,caller:xe});return t.jsx(zi,{...s,children:t.jsx(eo,{scope:i,contentId:Nt(),triggerRef:c,open:f,onOpenChange:p,onOpenToggle:d.useCallback(()=>p(y=>!y),[p]),hasCustomAnchor:u,onCustomAnchorAdd:d.useCallback(()=>m(!0),[]),onCustomAnchorRemove:d.useCallback(()=>m(!1),[]),modal:l,children:n})})};hn.displayName=xe;var fn="PopoverAnchor",to=d.forwardRef((e,i)=>{const{__scopePopover:n,...r}=e,o=E(fn,n),a=J(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:s}=o;return d.useEffect(()=>(l(),()=>s()),[l,s]),t.jsx(Tt,{...a,...r,ref:i})});to.displayName=fn;var yn="PopoverTrigger",vn=d.forwardRef((e,i)=>{const{__scopePopover:n,...r}=e,o=E(yn,n),a=J(n),l=Re(i,o.triggerRef),s=t.jsx(de.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Pn(o.open),...r,ref:l,onClick:V(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:t.jsx(Tt,{asChild:!0,...a,children:s})});vn.displayName=yn;var Ke="PopoverPortal",[no,io]=pn(Ke,{forceMount:void 0}),gn=e=>{const{__scopePopover:i,forceMount:n,children:r,container:o}=e,a=E(Ke,i);return t.jsx(no,{scope:i,forceMount:n,children:t.jsx(Ot,{present:n||a.open,children:t.jsx(Bi,{asChild:!0,container:o,children:r})})})};gn.displayName=Ke;var U="PopoverContent",xn=d.forwardRef((e,i)=>{const n=io(U,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,a=E(U,e.__scopePopover);return t.jsx(Ot,{present:r||a.open,children:a.modal?t.jsx(oo,{...o,ref:i}):t.jsx(ao,{...o,ref:i})})});xn.displayName=U;var ro=Ai("PopoverContent.RemoveScroll"),oo=d.forwardRef((e,i)=>{const n=E(U,e.__scopePopover),r=d.useRef(null),o=Re(i,r),a=d.useRef(!1);return d.useEffect(()=>{const l=r.current;if(l)return Ri(l)},[]),t.jsx(Mi,{as:ro,allowPinchZoom:!0,children:t.jsx(Cn,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:V(e.onCloseAutoFocus,l=>{var s;l.preventDefault(),a.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:V(e.onPointerDownOutside,l=>{const s=l.detail.originalEvent,c=s.button===0&&s.ctrlKey===!0,u=s.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:V(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),ao=d.forwardRef((e,i)=>{const n=E(U,e.__scopePopover),r=d.useRef(!1),o=d.useRef(!1);return t.jsx(Cn,{...e,ref:i,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,s;(l=e.onCloseAutoFocus)==null||l.call(e,a),a.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),Cn=d.forwardRef((e,i)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:m,...f}=e,p=E(U,n),y=J(n);return Li(),t.jsx(Vi,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:t.jsx(Ui,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:m,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:t.jsx($i,{"data-state":Pn(p.open),role:"dialog",id:p.contentId,...y,...f,ref:i,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),bn="PopoverClose",Ee=d.forwardRef((e,i)=>{const{__scopePopover:n,...r}=e,o=E(bn,n);return t.jsx(de.button,{type:"button",...r,ref:i,onClick:V(e.onClick,()=>o.onOpenChange(!1))})});Ee.displayName=bn;var so="PopoverArrow",lo=d.forwardRef((e,i)=>{const{__scopePopover:n,...r}=e,o=J(n);return t.jsx(Hi,{...o,...r,ref:i})});lo.displayName=so;function Pn(e){return e?"open":"closed"}var co=hn,uo=vn,mo=gn,jn=xn;const qn=co,Sn=uo,Ce=d.forwardRef(({className:e,align:i="center",sideOffset:n=4,...r},o)=>t.jsx(mo,{children:t.jsx(jn,{ref:o,align:i,sideOffset:n,className:q("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Ce.displayName=jn.displayName;Ce.__docgenInfo={description:"",methods:[],props:{align:{defaultValue:{value:'"center"',computed:!1},required:!1},sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}};function Qn(){const{query:e}=w(),i=g();return t.jsxs(qn,{children:[t.jsx(Sn,{asChild:!0,children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",children:t.jsx(Et,{})})}),t.jsxs(Ce,{side:"left",className:"w-[200px] space-y-3",children:[t.jsx("span",{className:"text-sm",children:i.queryBar.deletePopover.title}),t.jsxs("div",{className:"flex gap-1 justify-end",children:[t.jsx(Ee,{asChild:!0,children:t.jsx(v,{size:"xs",variant:"outline",children:i.queryBar.deletePopover.cancel})}),t.jsx(Ee,{asChild:!0,children:t.jsx(v,{size:"xs",variant:"destructive",onClick:()=>e.delete(),children:i.queryBar.deletePopover.ok})})]})]})]})}Qn.__docgenInfo={description:"",methods:[],displayName:"QueryBarDeleteAction"};const po=oe.object({title:oe.string()});function wn({open:e,onOpenChange:i,query:n}){const[r,o]=d.useState(!1),a=g(),l=Bt({resolver:Rt(po),values:{title:""}}),s=async c=>(o(!0),Promise.resolve(n.saveAsCustomPill(c.title)).then(()=>i(!1)).finally(()=>o(!1)));return t.jsx(ue,{open:e,onOpenChange:i,children:t.jsxs(me,{children:[t.jsx(pe,{children:t.jsx(he,{children:a.queryBar.saveDialog.title})}),t.jsx(Mt,{...l,children:t.jsxs("form",{onSubmit:l.handleSubmit(s),className:"space-y-6",children:[t.jsx(Lt,{control:l.control,name:"title",render:({field:c})=>t.jsxs(Vt,{children:[t.jsx(Ut,{children:a.queryBar.saveDialog.fields.title.label}),t.jsx(zt,{children:t.jsx(Le,{placeholder:a.queryBar.saveDialog.fields.title.placeholder,...c})}),t.jsx($t,{})]})}),t.jsx("div",{className:"text-sm",children:a.queryBar.saveDialog.notice}),t.jsxs(fe,{children:[t.jsx(ye,{asChild:!0,children:t.jsx(v,{variant:"outline",children:a.queryBar.saveDialog.cancel})}),t.jsx(v,{type:"submit",color:"primary",loading:r,children:a.queryBar.saveDialog.ok})]})]})})]})})}wn.__docgenInfo={description:"",methods:[],displayName:"QueryBarSaveDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},query:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  /**
   * ID of the Query
   */
  id: string;

  /**
   * SyntheticSqon representing the query
   */
  raw(): ISyntheticSqon;

  /**
   * Call this function to know if the Query is empty
   */
  isEmpty(): boolean;

  /**
   * Call this function to know if the Query is empty
   */
  isNotEmpty(): boolean;

  /**
   * Call this function to delete the Query
   */
  delete(): void;

  /**
   * Call this function to update the Query
   */
  update(data: Omit<ISyntheticSqon, 'id'>): void;

  /**
   * Call this function to save the Query as a custom pill
   */
  saveAsCustomPill(title: string): void | Promise<void>;

  /**
   * Call this function to duplicate the Query
   */
  duplicate(): void;

  /**
   * Call this function to get the index of the Query
   */
  index(): number;

  /**
   * Call this function to select or unselect the Query
   */
  toggleSelect(selected: boolean): void;

  /**
   * Call this function to know if the Query is selected
   */
  isSelected(): boolean;

  /**
   * Call this function to know if the Query is selectable,
   * meaning the query can be selected for a combine operation
   */
  isSelectable(): boolean;

  /**
   * Call this function to know if the Query is active
   */
  isActive(): boolean;

  /**
   * Call this function to set the Query as active
   */
  setAsActive(): void;

  /**
   * Call this function to add pill to the Query
   */
  addPill: (pill: IValueQuery) => void;

  /**
   * Call this function to remove pill from the Query by ID
   */
  removePillById: (pillId: string) => void;

  /**
   * Call this function to remove pill from the Query by field name
   */
  removePillByFieldOrIndex: (indexOfField: string | number) => void;

  /**
   * Call this function to set the Query as active
   */
  changeCombineOperator(operator: BooleanOperators): void;

  /**
   * Call this function to know if the Query is referenced in the active query
   */
  isReferencedInActiveQuery(): boolean;

  /**
   * Call this function to know if the Query has a custom pill
   */
  hasCustomPill(): boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0},description:"ID of the Query"},{key:"raw",value:{name:"ISyntheticSqon",required:!0},description:"SyntheticSqon representing the query"},{key:"isEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"isNotEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"delete",value:{name:"void",required:!0},description:"Call this function to delete the Query"},{key:"update",value:{name:"void",required:!0},description:"Call this function to update the Query"},{key:"saveAsCustomPill",value:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}],required:!0},description:"Call this function to save the Query as a custom pill"},{key:"duplicate",value:{name:"void",required:!0},description:"Call this function to duplicate the Query"},{key:"index",value:{name:"number",required:!0},description:"Call this function to get the index of the Query"},{key:"toggleSelect",value:{name:"void",required:!0},description:"Call this function to select or unselect the Query"},{key:"isSelected",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is selected"},{key:"isSelectable",value:{name:"boolean",required:!0},description:`Call this function to know if the Query is selectable,
meaning the query can be selected for a combine operation`},{key:"isActive",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is active"},{key:"setAsActive",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"addPill",value:{name:"signature",type:"function",raw:"(pill: IValueQuery) => void",signature:{arguments:[{type:{name:"IValueQuery"},name:"pill"}],return:{name:"void"}},required:!0},description:"Call this function to add pill to the Query"},{key:"removePillById",value:{name:"signature",type:"function",raw:"(pillId: string) => void",signature:{arguments:[{type:{name:"string"},name:"pillId"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by ID"},{key:"removePillByFieldOrIndex",value:{name:"signature",type:"function",raw:"(indexOfField: string | number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"indexOfField"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by field name"},{key:"changeCombineOperator",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"isReferencedInActiveQuery",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is referenced in the active query"},{key:"hasCustomPill",value:{name:"boolean",required:!0},description:"Call this function to know if the Query has a custom pill"}]}},description:""}}};function kn(){const{query:e}=w(),i=g(),[n,r]=d.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",onClick:()=>r(!0),disabled:e.hasCustomPill(),children:t.jsx(Yt,{})})}),t.jsx(N,{className:"max-w-[200px]",children:e.hasCustomPill()?i.queryBar.customPill.cannotSaveAsCustomPill:i.queryBar.customPill.createTooltip})]}),t.jsx(wn,{open:n,onOpenChange:r,query:e})]})}kn.__docgenInfo={description:"",methods:[],displayName:"QueryBarSaveAction"};function In(){const{customPillConfig:e}=x();return t.jsxs("div",{className:`
      flex items-center p-2 border-r border-t border-b 
      border-muted-foreground/20 bg-muted/35 text-muted-foreground
      group-data-[query-active=true]/query:border-primary/75
      group-data-[query-active=true]/query:bg-primary/10
      group-data-[query-active=true]/query:text-foreground`,onClick:i=>i.stopPropagation(),children:[(e==null?void 0:e.enable)&&t.jsx(kn,{}),t.jsx(mn,{}),t.jsx(Qn,{})]})}In.__docgenInfo={description:"",methods:[],displayName:"QueryBarActions"};function Fn(){const{queryBuilder:e,queryCountIcon:i,fetchQueryCount:n}=x(),{query:r}=w(),o=d.useRef(null),[a,l]=d.useState(0),[s,c]=d.useState(!0);return d.useEffect(()=>{if(e.getRawQueries().find(u=>u.id===r.id)){const u=o.current,m=Ci(r.raw(),e.getRawQueries());(!o.current||!bi(u,m))&&(o.current=m,c(!0),n(m).then(l).finally(()=>{c(!1)}))}},[n,r.raw(),e.getRawQueries()]),t.jsx("div",{className:"flex items-center gap-1",children:s?t.jsx(nr,{}):t.jsxs(t.Fragment,{children:[i,t.jsx("span",{className:"font-medium",children:ir(a)})]})})}Fn.__docgenInfo={description:"",methods:[],displayName:"QueryBarCount"};function Dn(){const{query:e}=w();return e.isSelectable()?t.jsxs("div",{className:`
      flex gap-2 items-center py-2 px-4 border-l border-t border-b 
      border-muted-foreground/20 bg-muted/35 text-muted-foreground
      group-data-[query-active=true]/query:border-primary/75
      group-data-[query-active=true]/query:bg-primary/10
      group-data-[query-active=true]/query:text-foreground
      `,children:[t.jsx(rr,{size:"sm",checked:e.isSelected(),onClick:i=>{i.stopPropagation(),e.toggleSelect(!e.isSelected())}}),t.jsxs("span",{className:"text-xs font-medium",children:["Q",e.index()+1]})]}):null}Dn.__docgenInfo={description:"",methods:[],displayName:"QueryBarSelector"};function An({type:e,size:i,className:n}){switch(e){case P.GreaterThan:return t.jsx(dr,{size:i,className:n});case P.GreaterThanOrEqualTo:return t.jsx(cr,{size:i,className:n});case P.LessThan:return t.jsx(lr,{size:i,className:n});case P.LessThanOrEqualTo:return t.jsx(sr,{size:i,className:n});case P.Between:return t.jsx(Ve,{size:i,className:n});case P.NotIn:return t.jsx(ur,{size:i,className:n});default:return t.jsx(ar,{size:i,className:n})}}An.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperator",props:{size:{required:!1,tsType:{name:"number"},description:""},type:{required:!0,tsType:{name:"union",raw:"SqonOpEnum | (string & {})",elements:[{name:"SqonOpEnum"},{name:"unknown"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};var Se,mt;function ho(){if(mt)return Se;mt=1;var e=/\s/;function i(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Se=i,Se}var Qe,pt;function fo(){if(pt)return Qe;pt=1;var e=ho(),i=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(i,"")}return Qe=n,Qe}var we,ht;function yo(){if(ht)return we;ht=1;var e=fo(),i=Pi(),n=Zi(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(i(u)){var m=typeof u.valueOf=="function"?u.valueOf():u;u=i(m)?m+"":m}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=a.test(u);return f||l.test(u)?s(u.slice(2),f?2:8):o.test(u)?r:+u}return we=c,we}var ke,ft;function vo(){if(ft)return ke;ft=1;var e=yo(),i=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===i||o===-1/0){var a=o<0?-1:1;return a*n}return o===o?o:0}return ke=r,ke}var Ie,yt;function go(){if(yt)return Ie;yt=1;var e=vo();function i(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return Ie=i,Ie}var Fe,vt;function xo(){if(vt)return Fe;vt=1;var e=er(),i=go();function n(r,o,a){return r&&r.length?(o=a||o===void 0?1:i(o),e(r,0,o<0?0:o)):[]}return Fe=n,Fe}var Co=xo();const bo=Di(Co);function Nn({className:e,...i}){return t.jsx("span",{className:e,...i,children:"&"})}Nn.__docgenInfo={description:"",methods:[],displayName:"IntersectionOperator"};function _n({className:e,...i}){return t.jsx("span",{className:e,...i,children:","})}_n.__docgenInfo={description:"",methods:[],displayName:"UnionOperator"};function K({canExpand:e,className:i,classNameContent:n,children:r,clickable:o,...a}){return t.jsx("div",{className:q("bg-background rounded-sm pl-2 text-xs font-medium leading-5 relative",e?"pr-[22px]":"pr-2",i),...a,children:t.jsx("div",{className:q("flex flex-wrap items-center",o?"hover:shadow-[inset_0_-4px_0_-2.5px_black] hover:cursor-pointer":"",n),children:r})})}K.__docgenInfo={description:"",methods:[],displayName:"QueryPillValuesContainer",props:{canExpand:{required:!1,tsType:{name:"boolean"},description:""},clickable:{required:!1,tsType:{name:"boolean"},description:""},classNameContent:{required:!1,tsType:{name:"string"},description:""}}};function be({valueFilter:e,...i}){const[n,r]=d.useState(!1),{t:o}=ce("common"),a=e.content.value.length>3,l=n?e.content.value:bo(e.content.value,3);return t.jsxs(K,{canExpand:a,...i,children:[e.content.overrideValuesName?t.jsx("div",{children:t.jsx("span",{children:e.content.overrideValuesName})}):l.map((s,c)=>t.jsxs("div",{children:[t.jsx("span",{children:o(`common.filters.labels.${e.content.field}_value.${s}`,{defaultValue:String(s)})}),l.length-1>c&&(e.op===P.All?t.jsx(Nn,{className:"px-1"}):t.jsx(_n,{className:"px-1"}))]},`${s}-${c}`)),a&&t.jsx("div",{className:"absolute right-1 hover:cursor-pointer",children:n?t.jsx(mr,{size:16,onClick:s=>{s.preventDefault(),r(!1)}}):t.jsx(Dt,{size:16,onClick:s=>{s.preventDefault(),r(!0)}})})]})}be.__docgenInfo={description:"",methods:[],displayName:"QueryPillValues",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function H({children:e,className:i,onRemovePill:n,...r}){return t.jsxs("div",{className:q("flex items-center rounded-sm p-[2px] bg-muted group-data-[query-active=true]/query:bg-primary/25",i),...r,children:[e,t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",className:"mr-[2px] ml-[4px] py-[2px] enabled:hover:bg-transparent size-4",onClick:o=>{o.stopPropagation(),n()},children:t.jsx(pr,{})})]})}H.__docgenInfo={description:"",methods:[],displayName:"QueryPillContainer",props:{onRemovePill:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function Ze({valueFilter:e,operator:i,className:n,...r}){const o=g(),{showLabels:a}=x();return t.jsx("div",{className:q("flex items-center",n),...r,children:(a||ji(e)||qi(e))&&t.jsxs(t.Fragment,{children:[t.jsx(tt,{children:o.queryPill.facet(e.content.field)}),t.jsx(et,{children:i})]})})}const et=({className:e,children:i,...n})=>t.jsx("span",{className:q("ml-[2px] mr-[4px]",e),...n,children:i});function tt({className:e,children:i,...n}){return t.jsx("span",{className:q("ml-[4px] mr-[2px] text-xs font-medium",e),...n,children:i})}et.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperatorContainer"};tt.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelContainer"};Ze.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelOperator",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},operator:{required:!0,tsType:{name:"ReactNode"},description:""}}};function nt({valueFilter:e,customPillEditEnabled:i}){var c;const{query:n}=w(),{queryPillFacetFilterConfig:r}=x(),[o,a]=d.useState(),l=!!(!i&&(r!=null&&r.enable)&&!((c=r==null?void 0:r.blacklistedFacets)!=null&&c.includes(e.content.field))),s=d.useCallback(()=>{r!=null&&r.onFacetClick&&!o&&a(r.onFacetClick(e))},[o,r==null?void 0:r.onFacetClick]);return t.jsxs(H,{onRemovePill:()=>n.removePillByFieldOrIndex(e.content.field),children:[t.jsx(Ze,{valueFilter:e,operator:t.jsx(An,{size:14,type:e.op})}),t.jsx(Wi,{condition:l,wrapper:u=>t.jsxs(qn,{children:[t.jsx(Sn,{onClick:s,children:u}),t.jsx(Ce,{align:"start",className:"p-2.5",children:o})]}),children:t.jsx(be,{valueFilter:e,clickable:l})})]})}nt.__docgenInfo={description:"",methods:[],displayName:"QueryPillField",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};function Tn(){const{t:e}=ce();return t.jsx("div",{children:e("common.components.queryPillRemote")})}Tn.__docgenInfo={description:"",methods:[],displayName:"QueryPillRemoteComponent"};function On({valueFilter:e}){const{query:i}=w();return t.jsxs(H,{onRemovePill:()=>i.removePillByFieldOrIndex(e.content.field),children:[t.jsx(Ze,{valueFilter:e,operator:t.jsx(Ve,{size:14,type:e.op})}),t.jsx(be,{valueFilter:e})]})}On.__docgenInfo={description:"",methods:[],displayName:"QueryPillUploadList",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function En({valueFilter:e}){const{query:i}=w(),n=g();return t.jsxs(H,{onRemovePill:()=>i.removePillByFieldOrIndex(e.content.field),children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(tt,{children:e.content.index?Te(e.content.index):n.queryPill.facet(e.content.field)}),t.jsx(et,{children:t.jsx(Ve,{size:14})})]}),t.jsx(K,{children:t.jsx(be,{valueFilter:e})})]})}En.__docgenInfo={description:"",methods:[],displayName:"QueryPillSet",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function Bn({refIndex:e}){const{query:i}=w(),{getQueryReferenceColor:n}=x(),r=n(e);return t.jsx(H,{onRemovePill:()=>i.removePillByFieldOrIndex(e),children:t.jsx(K,{children:t.jsx("span",{style:{color:r},children:`Q${e+1}`})})})}Bn.__docgenInfo={description:"",methods:[],displayName:"QueryPillReference",props:{refIndex:{required:!0,tsType:{name:"number"},description:""}}};const Rn=({children:e,icon:i=Ue,onChangeText:n,...r})=>{const[o,a]=d.useState(!1),l=i;return t.jsx("div",{...r,children:o?t.jsx(Le,{defaultValue:e,autoFocus:!0,onBlur:s=>{a(!1),n==null||n(s.currentTarget.value)},className:"max-w-96 w-full",onKeyUp:s=>{s.key==="Enter"&&(a(!1),n==null||n(s.currentTarget.value))}}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:e}),t.jsx(v,{iconOnly:!0,onClick:()=>a(!0),children:t.jsx(l,{})})]})})};Rn.__docgenInfo={description:"",methods:[],displayName:"EditableText",props:{icon:{required:!1,tsType:{name:"ReactForwardRefExoticComponent",raw:"React.ForwardRefExoticComponent<Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>>",elements:[{name:"intersection",raw:"Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>",elements:[{name:"Omit",elements:[{name:"LucideProps"},{name:"literal",value:"'ref'"}],raw:"Omit<LucideProps, 'ref'>"},{name:"ReactRefAttributes",raw:"React.RefAttributes<SVGSVGElement>",elements:[{name:"SVGSVGElement"}]}]}]},description:"",defaultValue:{value:"PencilLineIcon",computed:!0}},children:{required:!0,tsType:{name:"string"},description:""},onChangeText:{required:!1,tsType:{name:"signature",type:"function",raw:"(text: string) => void",signature:{arguments:[{type:{name:"string"},name:"text"}],return:{name:"void"}}},description:""}}};function Mn(e,i){$.open({type:"warning",title:i.savedFilter.deleteDialog.title,description:i.savedFilter.deleteDialog.description,cancelProps:{children:i.savedFilter.deleteDialog.cancel},actionProps:{color:"destructive",onClick:()=>e.delete(),children:i.savedFilter.deleteDialog.ok}})}function Ln(e,i){$.open({type:"warning",title:i.savedFilter.overwriteDialog.title,description:i.savedFilter.overwriteDialog.description,cancelProps:{children:i.savedFilter.overwriteDialog.cancel},actionProps:{onClick:()=>e.createSavedFilter(),children:i.savedFilter.overwriteDialog.ok}})}function Po(e){$.open({type:"error",title:e.queryPill.customPill.cantBeEmptyDialog.title,description:e.queryPill.customPill.cantBeEmptyDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.cantBeEmptyDialog.ok}})}function jo(e){$.open({type:"error",title:e.queryPill.customPill.titleExistsDialog.title,description:e.queryPill.customPill.titleExistsDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.titleExistsDialog.ok}})}function qo(e,i,n,r){$.open({type:"warning",title:e.queryPill.customPill.saveDialog.title,description:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:e.queryPill.customPill.saveDialog.confirmationMessage.replace("{title}",i)}),(n==null?void 0:n.length)&&t.jsxs("div",{className:"border rounded p-4 space-y-2",children:[t.jsx("div",{className:"font-medium text-foreground",children:e.queryPill.customPill.saveDialog.affectedFilters}),t.jsx("ul",{className:"list-disc list-inside",children:n.map(o=>t.jsx("li",{className:"list-item",children:o.title}))})]})]}),cancelProps:{children:e.queryPill.customPill.saveDialog.cancel},actionProps:{children:e.queryPill.customPill.saveDialog.ok,onClick:async o=>(o.preventDefault(),r())}})}function Vn({open:e,onOpenChange:i,queryPill:n}){const r=g(),{queryBuilder:o,customPillConfig:a}=x(),l=Gt({id:a==null?void 0:a.queryBuilderEditId,initialState:{activeQueryId:n.queries[0].id,queries:n.queries,savedFilters:[n],selectedQueryIndexes:[]},onCustomPillUpdate:async j=>{var T,I;return await Promise.resolve((I=(T=o.coreProps).onCustomPillUpdate)==null?void 0:I.call(T,j)).then(W=>(o.setState(M=>({...M,queries:Si(M.queries,j)})),i(!1),W))}}),[s,c]=d.useState(n.title),[u,m]=d.useState(!1),f=l.getQueries()[0],p=l.getSelectedSavedFilter(),y=s!==n.title,C=y||(p==null?void 0:p.isDirty()),k=d.useCallback(j=>{j?i(!0):(l.reset(),i(!1))},[i,l]),_=d.useCallback(async()=>{if(f.isEmpty()){Po(r);return}if(m(!0),y){const b=await(a==null?void 0:a.validateCustomPillTitle(s));if(b!==void 0&&b===!1){m(!1),jo(r);return}}const j=await(a==null?void 0:a.fetchSavedFiltersByCustomPillId(n.id).finally(()=>m(!1)));qo(r,s,j,async()=>p==null?void 0:p.save(le.Query,{title:s}))},[f,p,r,s,n.id,a]);return t.jsx(ue,{open:e,onOpenChange:k,children:t.jsx(Xe.Provider,{value:{queryBuilder:l,fetchQueryCount:async()=>0,getQueryReferenceColor:()=>"",showLabels:!0,resolveSyntheticSqon:j=>j},children:t.jsxs(me,{className:"flex flex-row gap-0 h-screen w-screen max-w-screen rounded-none border-none sm:rounded-none p-0",children:[t.jsx("aside",{className:"flex flex-col min-w-48 bg-primary",children:t.jsx("span",{className:"italic",children:"TODO Insert filters"})}),t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[t.jsx(pe,{children:t.jsx(he,{children:r.queryPill.customPill.editDialog.title})}),t.jsx(hr,{}),t.jsx("div",{children:t.jsx(Rn,{onChangeText:c,children:s})}),t.jsx("div",{"data-query-active":!0,className:"flex flex-wrap group/query",children:t.jsx(Je.Provider,{value:{query:f},children:t.jsx(Pe,{sqon:f.raw(),customPillEditEnabled:!0})})}),t.jsxs(fe,{className:"mt-5",children:[t.jsx(ye,{asChild:!0,children:t.jsx(v,{variant:"outline",children:r.queryPill.customPill.editDialog.cancel})}),t.jsx(v,{type:"submit",color:"primary",loading:u,disabled:!C,onClick:_,children:r.queryPill.customPill.editDialog.ok})]})]})})]})})})}Vn.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustomEditDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},queryPill:{required:!0,tsType:{name:"ISavedFilter"},description:""}}};function Un({valueQuery:e}){const{query:i}=w(),[n,r]=d.useState(!1),{title:o,...a}=e,l={id:e.id,title:e.title,queries:[a],favorite:!1};return t.jsxs(t.Fragment,{children:[t.jsx(H,{onRemovePill:()=>i.removePillById(e.id),children:t.jsxs(K,{className:"pr-1",classNameContent:"space-x-1",children:[t.jsx("span",{children:e.title}),t.jsx(v,{iconOnly:!0,size:"xs",className:"size-auto p-[2px]",onClick:()=>r(!0),children:t.jsx(Ue,{})})]})}),n&&t.jsx(Vn,{open:n,onOpenChange:r,queryPill:l})]})}Un.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustom",props:{valueQuery:{required:!0,tsType:{name:"IValueQuery"},description:""}}};function zn({groupFilter:e}){const i={},n=d.useMemo(()=>(e.content.forEach(r=>{i.hasOwnProperty(r.content.field)?(i[r.content.field]=lt(i[r.content.field]),i[r.content.field].content.value=i[r.content.field].content.value.concat(r.content.value),r.op===ct.In&&e.op===O.And&&e.skipBooleanOperatorCheck&&(i[r.content.field].op=ct.All)):i[r.content.field]=lt(r)}),{...e,content:Object.entries(i).map(r=>r[1])}),[e]);return t.jsx(nt,{valueFilter:n.content[0]})}zn.__docgenInfo={description:"",methods:[],displayName:"QueryPillIsolatedBoolean",props:{groupFilter:{required:!0,tsType:{name:"ISqonGroupFilter"},description:""}}};function $n({className:e,...i}){const n=g();return t.jsx("span",{className:q("",e),...i,children:n.queryPill.operator.and})}$n.__docgenInfo={description:"",methods:[],displayName:"AndOperator"};function Hn({className:e,...i}){const n=g();return t.jsx("span",{className:q("",e),...i,children:n.queryPill.operator.or})}Hn.__docgenInfo={description:"",methods:[],displayName:"OrOperator"};function Wn(){const{query:e}=w(),i=g(),n=e.raw().op===O.And;return t.jsx("div",{className:"px-2",onClick:r=>r.stopPropagation(),children:t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx(v,{variant:"link",className:"text-sm p-0 h-auto font-normal",onClick:()=>e.changeCombineOperator(n?O.Or:O.And),children:n?t.jsx($n,{}):t.jsx(Hn,{})})}),t.jsxs(N,{children:[i.queryPill.operator.changeOperatorTo,' "',n?i.queryPill.operator.or:i.queryPill.operator.and,'"']})]})})}Wn.__docgenInfo={description:"",methods:[],displayName:"QueryCombiner"};function Pe({sqon:e,customPillEditEnabled:i}){return t.jsx(t.Fragment,{children:e.content.map((n,r)=>t.jsxs("div",{className:"flex items-center py-[2px]",children:[n.skipBooleanOperatorCheck?t.jsx(zn,{groupFilter:n}):Qi(n)?t.jsx(Un,{valueQuery:n}):It(n)?t.jsx(Pe,{sqon:n}):wi(n)?t.jsx(Bn,{refIndex:n}):ki(n)?t.jsx(En,{valueFilter:n}):Ii(n)?t.jsx(On,{valueFilter:n}):Fi(n)?t.jsx(Tn,{}):t.jsx(nt,{valueFilter:n,customPillEditEnabled:i}),So(e.content,r)&&t.jsx(Wn,{})]},r))})}const So=(e,i)=>e.length-1>i;Pe.__docgenInfo={description:"",methods:[],displayName:"QueryPillBoolean",props:{sqon:{required:!0,tsType:{name:"ISyntheticSqon"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};const Qo=or({base:"flex flex-1 py-2 px-3 border ",variants:{active:{true:["border-primary/75 bg-primary/10"],false:["border-muted-foreground/20 bg-muted/35 text-muted-foreground"]}},defaultVariants:{active:!1}});function Yn({query:e}){const i=e.isActive(),n=g(),{enableCombine:r}=x(),o=()=>{i||e.setAsActive()};return t.jsx(Je.Provider,{value:{query:e},children:t.jsxs("div",{"data-query-active":i,className:"flex group/query",onClick:o,children:[t.jsx(un,{}),r&&t.jsx(Dn,{}),t.jsx("div",{className:Qo({active:i}),children:t.jsx("div",{className:"flex flex-1 items-center justify-between",children:e.isEmpty()?t.jsx(t.Fragment,{children:n.queryBar.empty}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex-1",children:It(e.raw())&&t.jsx("div",{className:"flex items-center flex-wrap pr-2",children:t.jsx(Pe,{sqon:e.raw()})})}),t.jsx(Fn,{})]})})}),e.isNotEmpty()&&t.jsx(In,{})]})})}Yn.__docgenInfo={description:"",methods:[],displayName:"QueryBar",props:{query:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  /**
   * ID of the Query
   */
  id: string;

  /**
   * SyntheticSqon representing the query
   */
  raw(): ISyntheticSqon;

  /**
   * Call this function to know if the Query is empty
   */
  isEmpty(): boolean;

  /**
   * Call this function to know if the Query is empty
   */
  isNotEmpty(): boolean;

  /**
   * Call this function to delete the Query
   */
  delete(): void;

  /**
   * Call this function to update the Query
   */
  update(data: Omit<ISyntheticSqon, 'id'>): void;

  /**
   * Call this function to save the Query as a custom pill
   */
  saveAsCustomPill(title: string): void | Promise<void>;

  /**
   * Call this function to duplicate the Query
   */
  duplicate(): void;

  /**
   * Call this function to get the index of the Query
   */
  index(): number;

  /**
   * Call this function to select or unselect the Query
   */
  toggleSelect(selected: boolean): void;

  /**
   * Call this function to know if the Query is selected
   */
  isSelected(): boolean;

  /**
   * Call this function to know if the Query is selectable,
   * meaning the query can be selected for a combine operation
   */
  isSelectable(): boolean;

  /**
   * Call this function to know if the Query is active
   */
  isActive(): boolean;

  /**
   * Call this function to set the Query as active
   */
  setAsActive(): void;

  /**
   * Call this function to add pill to the Query
   */
  addPill: (pill: IValueQuery) => void;

  /**
   * Call this function to remove pill from the Query by ID
   */
  removePillById: (pillId: string) => void;

  /**
   * Call this function to remove pill from the Query by field name
   */
  removePillByFieldOrIndex: (indexOfField: string | number) => void;

  /**
   * Call this function to set the Query as active
   */
  changeCombineOperator(operator: BooleanOperators): void;

  /**
   * Call this function to know if the Query is referenced in the active query
   */
  isReferencedInActiveQuery(): boolean;

  /**
   * Call this function to know if the Query has a custom pill
   */
  hasCustomPill(): boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0},description:"ID of the Query"},{key:"raw",value:{name:"ISyntheticSqon",required:!0},description:"SyntheticSqon representing the query"},{key:"isEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"isNotEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"delete",value:{name:"void",required:!0},description:"Call this function to delete the Query"},{key:"update",value:{name:"void",required:!0},description:"Call this function to update the Query"},{key:"saveAsCustomPill",value:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}],required:!0},description:"Call this function to save the Query as a custom pill"},{key:"duplicate",value:{name:"void",required:!0},description:"Call this function to duplicate the Query"},{key:"index",value:{name:"number",required:!0},description:"Call this function to get the index of the Query"},{key:"toggleSelect",value:{name:"void",required:!0},description:"Call this function to select or unselect the Query"},{key:"isSelected",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is selected"},{key:"isSelectable",value:{name:"boolean",required:!0},description:`Call this function to know if the Query is selectable,
meaning the query can be selected for a combine operation`},{key:"isActive",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is active"},{key:"setAsActive",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"addPill",value:{name:"signature",type:"function",raw:"(pill: IValueQuery) => void",signature:{arguments:[{type:{name:"IValueQuery"},name:"pill"}],return:{name:"void"}},required:!0},description:"Call this function to add pill to the Query"},{key:"removePillById",value:{name:"signature",type:"function",raw:"(pillId: string) => void",signature:{arguments:[{type:{name:"string"},name:"pillId"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by ID"},{key:"removePillByFieldOrIndex",value:{name:"signature",type:"function",raw:"(indexOfField: string | number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"indexOfField"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by field name"},{key:"changeCombineOperator",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"isReferencedInActiveQuery",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is referenced in the active query"},{key:"hasCustomPill",value:{name:"boolean",required:!0},description:"Call this function to know if the Query has a custom pill"}]}},description:""}}};function Gn(){const e=g(),{queryBuilder:i}=x(),n=d.useCallback(()=>{$.open({type:"warning",title:e.toolbar.clearAllDialog.title,description:e.toolbar.clearAllDialog.description,cancelProps:{children:e.toolbar.clearAllDialog.cancel},actionProps:{variant:"destructive",onClick:()=>i.clearQueries(),children:e.toolbar.clearAllDialog.ok}})},[i,e]);return i.getQueries().length>1?t.jsx(v,{variant:"ghost",size:"sm",className:"no-underline enabled:hover:no-underline",onClick:n,children:e.toolbar.clearAll}):null}Gn.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarClearAction"};function Xn(){const e=g(),{queryBuilder:i,enableCombine:n}=x();return i.canCombine()&&n?t.jsx(fr,{actions:[{label:Te(e.queryPill.operator.and),onClick:()=>i.combineSelectedQueries(O.And)},{label:Te(e.queryPill.operator.or),onClick:()=>i.combineSelectedQueries(O.Or)}],onDefaultAction:()=>i.combineSelectedQueries(O.And),size:"xs",color:"primary",children:e.toolbar.combine}):null}Xn.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarCombineAction"};function Jn(){const e=g(),{queryBuilder:i}=x();return i.canCombine()?null:t.jsxs(v,{size:"xs",disabled:i.hasEmptyQuery(),onClick:()=>i.createQuery({op:O.And,content:[]}),children:[t.jsx(Ht,{}),e.toolbar.newQuery]})}Jn.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarAddAction"};function Kn(){const e=g(),{queryBuilder:i,enableShowHideLabels:n,showLabels:r,toggleLabels:o}=x();return!i.canCombine()&&n?t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(yr,{size:"xs",checked:r,onCheckedChange:o})," ",e.toolbar.labels]}):null}Kn.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarLabelsAction"};function Zn(){return t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Jn,{}),t.jsx(Xn,{}),t.jsx(Kn,{})]}),t.jsx("div",{children:t.jsx(Gn,{})})]})}Zn.__docgenInfo={description:"",methods:[],displayName:"QueriesToolbar"};function ei(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter(),r=function(){n!=null&&n.isDirty()?Ln(i,e):n==null||n.duplicate()};return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:(n==null?void 0:n.isNew())||!n,onClick:r,children:t.jsx(Wt,{})})})}),t.jsx(N,{children:e.savedFilter.duplicateTooltip})]})}ei.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersDuplicateAction"};function ti(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter(),r=function(){n!=null&&n.isDirty()?Ln(i,e):i.createSavedFilter()};return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",onClick:r,disabled:(n==null?void 0:n.isNew())||!n,children:t.jsx(Ht,{})})})}),t.jsx(N,{children:e.savedFilter.newFilter})]})}ti.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersNewAction"};function ni(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter(),r=n?!n.isDirty():i.isEmpty(),o=function(){n?n.save(le.Filter):i.saveNewFilter()};return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:r,className:n!=null&&n.isDirty()?"text-yellow-500":"",onClick:o,children:t.jsx(Yt,{})})})}),t.jsx(N,{children:i.isEmpty()?e.savedFilter.saveTooltip.whenEmpty:n!=null&&n.isDirty()?e.savedFilter.saveTooltip.whenDirty:e.savedFilter.saveTooltip.default})]})}ni.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersSaveAction"};function ii(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter();return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:(n==null?void 0:n.isNew())||!n,onClick:()=>Mn(n,e),children:t.jsx(Et,{})})})}),t.jsx(N,{children:e.savedFilter.deleteTooltip})]})}ii.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersDeleteAction"};function ri(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter(),r=function(){};return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:(n==null?void 0:n.isDirty())||(n==null?void 0:n.isNew())||!n,onClick:r,children:t.jsx(Yi,{})})})}),t.jsx(N,{children:n!=null&&n.isDirty()||!n?e.savedFilter.shareTooltip.whenNotSaved:e.savedFilter.shareTooltip.default})]})}ri.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersShareAction"};const wo=oe.object({title:oe.string().min(2,"Min 2 characters").max(50,"Max 50 characters")});function it({open:e,onOpenChange:i,savedFilter:n}){const r=g(),{queryBuilder:o}=x(),a=Bt({resolver:Rt(wo),values:{title:(n==null?void 0:n.raw().title)||""}});function l(s){n?n.save(le.Filter,{title:s.title}):o.saveNewFilter({title:s.title}),i(!1)}return t.jsx(ue,{open:e,onOpenChange:i,children:t.jsxs(me,{children:[t.jsx(pe,{children:t.jsx(he,{children:r.savedFilter.editDialog.title})}),t.jsx(Mt,{...a,children:t.jsxs("form",{onSubmit:a.handleSubmit(l),className:"space-y-8",children:[t.jsx(Lt,{control:a.control,name:"title",render:({field:s})=>t.jsxs(Vt,{children:[t.jsx(Ut,{children:r.savedFilter.editDialog.fields.title.label}),t.jsx(zt,{children:t.jsx(Le,{placeholder:r.savedFilter.editDialog.fields.title.placeholder,...s})}),t.jsx($t,{})]})}),t.jsxs(fe,{children:[t.jsx(ye,{asChild:!0,children:t.jsx(v,{variant:"outline",children:r.savedFilter.editDialog.cancel})}),t.jsx(v,{type:"submit",color:"primary",children:r.savedFilter.editDialog.ok})]})]})})]})})}it.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersEditDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},savedFilter:{required:!0,tsType:{name:"union",raw:"SavedFilterInstance | null",elements:[{name:"signature",type:"object",raw:`{
  /**
   * Id of the SavedFilter
   */
  id: string;

  /**
   * Call this function to get the SavedFilter's raw data
   */
  raw(): ISavedFilter;

  /**
   * Call this function to get the SavedFilter's queries
   */
  getQueries(): QueryInstance[];

  /**
   * Call this function to get the SavedFilter's raw queries (ISyntheticSqon[])
   */
  getRawQueries(): ISyntheticSqon[];

  /**
   * Call this function to get a Query by id
   */
  getQueryById(id: string): QueryInstance | null;

  /**
   * Call this function to check if the SavedFilter has queries
   */
  hasQueries(): boolean;

  /**
   * Call this function to delete the SavedFilter
   */
  delete(): void | Promise<void>;

  /**
   * Call this function to duplicate the SavedFilter
   */
  duplicate(): void;

  /**
   * Call this function to save (update) the SavedFilter
   */
  save(
    type: SavedFilterTypeEnum,
    params?: {
      title?: string;
      favorite?: boolean;
    }
  ): Promise<void>;

  /**
   * Call this function to discard the changes made to the SavedFilter
   */
  discardChanges(): void;

  /**
   * Call this function to select the SavedFilter
   */
  select(): void;

  /**
   * Call this function to check if the SavedFilter is a favorite
   */
  isFavorite(): boolean;

  /**
   * Call this function to check if the SavedFilter is new meaning it has never been saved.
   */
  isNew(): boolean;

  /**
   * Call this function to check if the SavedFilter is dirty meaning it has been modified.
   */
  isDirty(): boolean;

  /**
   * Call this function to check if the SavedFilter is currently selected
   */
  isSelected(): boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0},description:"Id of the SavedFilter"},{key:"raw",value:{name:"ISavedFilter",required:!0},description:"Call this function to get the SavedFilter's raw data"},{key:"getQueries",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  /**
   * ID of the Query
   */
  id: string;

  /**
   * SyntheticSqon representing the query
   */
  raw(): ISyntheticSqon;

  /**
   * Call this function to know if the Query is empty
   */
  isEmpty(): boolean;

  /**
   * Call this function to know if the Query is empty
   */
  isNotEmpty(): boolean;

  /**
   * Call this function to delete the Query
   */
  delete(): void;

  /**
   * Call this function to update the Query
   */
  update(data: Omit<ISyntheticSqon, 'id'>): void;

  /**
   * Call this function to save the Query as a custom pill
   */
  saveAsCustomPill(title: string): void | Promise<void>;

  /**
   * Call this function to duplicate the Query
   */
  duplicate(): void;

  /**
   * Call this function to get the index of the Query
   */
  index(): number;

  /**
   * Call this function to select or unselect the Query
   */
  toggleSelect(selected: boolean): void;

  /**
   * Call this function to know if the Query is selected
   */
  isSelected(): boolean;

  /**
   * Call this function to know if the Query is selectable,
   * meaning the query can be selected for a combine operation
   */
  isSelectable(): boolean;

  /**
   * Call this function to know if the Query is active
   */
  isActive(): boolean;

  /**
   * Call this function to set the Query as active
   */
  setAsActive(): void;

  /**
   * Call this function to add pill to the Query
   */
  addPill: (pill: IValueQuery) => void;

  /**
   * Call this function to remove pill from the Query by ID
   */
  removePillById: (pillId: string) => void;

  /**
   * Call this function to remove pill from the Query by field name
   */
  removePillByFieldOrIndex: (indexOfField: string | number) => void;

  /**
   * Call this function to set the Query as active
   */
  changeCombineOperator(operator: BooleanOperators): void;

  /**
   * Call this function to know if the Query is referenced in the active query
   */
  isReferencedInActiveQuery(): boolean;

  /**
   * Call this function to know if the Query has a custom pill
   */
  hasCustomPill(): boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0},description:"ID of the Query"},{key:"raw",value:{name:"ISyntheticSqon",required:!0},description:"SyntheticSqon representing the query"},{key:"isEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"isNotEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"delete",value:{name:"void",required:!0},description:"Call this function to delete the Query"},{key:"update",value:{name:"void",required:!0},description:"Call this function to update the Query"},{key:"saveAsCustomPill",value:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}],required:!0},description:"Call this function to save the Query as a custom pill"},{key:"duplicate",value:{name:"void",required:!0},description:"Call this function to duplicate the Query"},{key:"index",value:{name:"number",required:!0},description:"Call this function to get the index of the Query"},{key:"toggleSelect",value:{name:"void",required:!0},description:"Call this function to select or unselect the Query"},{key:"isSelected",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is selected"},{key:"isSelectable",value:{name:"boolean",required:!0},description:`Call this function to know if the Query is selectable,
meaning the query can be selected for a combine operation`},{key:"isActive",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is active"},{key:"setAsActive",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"addPill",value:{name:"signature",type:"function",raw:"(pill: IValueQuery) => void",signature:{arguments:[{type:{name:"IValueQuery"},name:"pill"}],return:{name:"void"}},required:!0},description:"Call this function to add pill to the Query"},{key:"removePillById",value:{name:"signature",type:"function",raw:"(pillId: string) => void",signature:{arguments:[{type:{name:"string"},name:"pillId"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by ID"},{key:"removePillByFieldOrIndex",value:{name:"signature",type:"function",raw:"(indexOfField: string | number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"indexOfField"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by field name"},{key:"changeCombineOperator",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"isReferencedInActiveQuery",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is referenced in the active query"},{key:"hasCustomPill",value:{name:"boolean",required:!0},description:"Call this function to know if the Query has a custom pill"}]}}],raw:"QueryInstance[]",required:!0},description:"Call this function to get the SavedFilter's queries"},{key:"getRawQueries",value:{name:"Array",elements:[{name:"ISyntheticSqon"}],raw:"ISyntheticSqon[]",required:!0},description:"Call this function to get the SavedFilter's raw queries (ISyntheticSqon[])"},{key:"getQueryById",value:{name:"union",raw:"QueryInstance | null",elements:[{name:"signature",type:"object",raw:`{
  /**
   * ID of the Query
   */
  id: string;

  /**
   * SyntheticSqon representing the query
   */
  raw(): ISyntheticSqon;

  /**
   * Call this function to know if the Query is empty
   */
  isEmpty(): boolean;

  /**
   * Call this function to know if the Query is empty
   */
  isNotEmpty(): boolean;

  /**
   * Call this function to delete the Query
   */
  delete(): void;

  /**
   * Call this function to update the Query
   */
  update(data: Omit<ISyntheticSqon, 'id'>): void;

  /**
   * Call this function to save the Query as a custom pill
   */
  saveAsCustomPill(title: string): void | Promise<void>;

  /**
   * Call this function to duplicate the Query
   */
  duplicate(): void;

  /**
   * Call this function to get the index of the Query
   */
  index(): number;

  /**
   * Call this function to select or unselect the Query
   */
  toggleSelect(selected: boolean): void;

  /**
   * Call this function to know if the Query is selected
   */
  isSelected(): boolean;

  /**
   * Call this function to know if the Query is selectable,
   * meaning the query can be selected for a combine operation
   */
  isSelectable(): boolean;

  /**
   * Call this function to know if the Query is active
   */
  isActive(): boolean;

  /**
   * Call this function to set the Query as active
   */
  setAsActive(): void;

  /**
   * Call this function to add pill to the Query
   */
  addPill: (pill: IValueQuery) => void;

  /**
   * Call this function to remove pill from the Query by ID
   */
  removePillById: (pillId: string) => void;

  /**
   * Call this function to remove pill from the Query by field name
   */
  removePillByFieldOrIndex: (indexOfField: string | number) => void;

  /**
   * Call this function to set the Query as active
   */
  changeCombineOperator(operator: BooleanOperators): void;

  /**
   * Call this function to know if the Query is referenced in the active query
   */
  isReferencedInActiveQuery(): boolean;

  /**
   * Call this function to know if the Query has a custom pill
   */
  hasCustomPill(): boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0},description:"ID of the Query"},{key:"raw",value:{name:"ISyntheticSqon",required:!0},description:"SyntheticSqon representing the query"},{key:"isEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"isNotEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"delete",value:{name:"void",required:!0},description:"Call this function to delete the Query"},{key:"update",value:{name:"void",required:!0},description:"Call this function to update the Query"},{key:"saveAsCustomPill",value:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}],required:!0},description:"Call this function to save the Query as a custom pill"},{key:"duplicate",value:{name:"void",required:!0},description:"Call this function to duplicate the Query"},{key:"index",value:{name:"number",required:!0},description:"Call this function to get the index of the Query"},{key:"toggleSelect",value:{name:"void",required:!0},description:"Call this function to select or unselect the Query"},{key:"isSelected",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is selected"},{key:"isSelectable",value:{name:"boolean",required:!0},description:`Call this function to know if the Query is selectable,
meaning the query can be selected for a combine operation`},{key:"isActive",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is active"},{key:"setAsActive",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"addPill",value:{name:"signature",type:"function",raw:"(pill: IValueQuery) => void",signature:{arguments:[{type:{name:"IValueQuery"},name:"pill"}],return:{name:"void"}},required:!0},description:"Call this function to add pill to the Query"},{key:"removePillById",value:{name:"signature",type:"function",raw:"(pillId: string) => void",signature:{arguments:[{type:{name:"string"},name:"pillId"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by ID"},{key:"removePillByFieldOrIndex",value:{name:"signature",type:"function",raw:"(indexOfField: string | number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"indexOfField"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by field name"},{key:"changeCombineOperator",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"isReferencedInActiveQuery",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is referenced in the active query"},{key:"hasCustomPill",value:{name:"boolean",required:!0},description:"Call this function to know if the Query has a custom pill"}]}},{name:"null"}],required:!0},description:"Call this function to get a Query by id"},{key:"hasQueries",value:{name:"boolean",required:!0},description:"Call this function to check if the SavedFilter has queries"},{key:"delete",value:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}],required:!0},description:"Call this function to delete the SavedFilter"},{key:"duplicate",value:{name:"void",required:!0},description:"Call this function to duplicate the SavedFilter"},{key:"save",value:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>",required:!0},description:"Call this function to save (update) the SavedFilter"},{key:"discardChanges",value:{name:"void",required:!0},description:"Call this function to discard the changes made to the SavedFilter"},{key:"select",value:{name:"void",required:!0},description:"Call this function to select the SavedFilter"},{key:"isFavorite",value:{name:"boolean",required:!0},description:"Call this function to check if the SavedFilter is a favorite"},{key:"isNew",value:{name:"boolean",required:!0},description:"Call this function to check if the SavedFilter is new meaning it has never been saved."},{key:"isDirty",value:{name:"boolean",required:!0},description:"Call this function to check if the SavedFilter is dirty meaning it has been modified."},{key:"isSelected",value:{name:"boolean",required:!0},description:"Call this function to check if the SavedFilter is currently selected"}]}},{name:"null"}]},description:""}}};const ko={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Io=(e,i,n)=>{let r;const o=ko[e];return typeof o=="string"?r=o:i===1?r=o.one:r=o.other.replace("{{count}}",String(i)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},Fo={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Do=(e,i,n,r)=>Fo[e],Ao={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},No={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},_o={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},To={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Oo={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Eo=(e,i)=>{const n=Number(e),r=i==null?void 0:i.unit;if(n===0)return"0";const o=["year","week","hour","minute","second"];let a;return n===1?a=r&&o.includes(r)?"ère":"er":a="ème",n+a},Bo=["MMM","MMMM"],Ro={preprocessor:(e,i)=>e.getDate()===1||!i.some(r=>r.isToken&&Bo.includes(r.value))?i:i.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:Eo,era:Y({values:Ao,defaultWidth:"wide"}),quarter:Y({values:No,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Y({values:_o,defaultWidth:"wide"}),day:Y({values:To,defaultWidth:"wide"}),dayPeriod:Y({values:Oo,defaultWidth:"wide"})},Mo=/^(\d+)(ième|ère|ème|er|e)?/i,Lo=/\d+/i,Vo={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},Uo={any:[/^av/i,/^ap/i]},zo={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},$o={any:[/1/i,/2/i,/3/i,/4/i]},Ho={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},Wo={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Yo={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},Go={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Xo={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},Jo={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Ko={ordinalNumber:tr({matchPattern:Mo,parsePattern:Lo,valueCallback:e=>parseInt(e)}),era:G({matchPatterns:Vo,defaultMatchWidth:"wide",parsePatterns:Uo,defaultParseWidth:"any"}),quarter:G({matchPatterns:zo,defaultMatchWidth:"wide",parsePatterns:$o,defaultParseWidth:"any",valueCallback:e=>e+1}),month:G({matchPatterns:Ho,defaultMatchWidth:"wide",parsePatterns:Wo,defaultParseWidth:"any"}),day:G({matchPatterns:Yo,defaultMatchWidth:"wide",parsePatterns:Go,defaultParseWidth:"any"}),dayPeriod:G({matchPatterns:Xo,defaultMatchWidth:"any",parsePatterns:Jo,defaultParseWidth:"any"})},Zo={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"yy-MM-dd"},ea={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},ta={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},na={date:qe({formats:Zo,defaultWidth:"full"}),time:qe({formats:ea,defaultWidth:"full"}),dateTime:qe({formats:ta,defaultWidth:"full"})},ia={code:"fr-CA",formatDistance:Io,formatLong:na,formatRelative:Do,localize:Ro,match:Ko,options:{weekStartsOn:0,firstWeekContainsDate:1}};function oi({open:e,onOpenChange:i}){const n=g(),{queryBuilder:r}=x(),o=r.getSavedFilters();return d.useEffect(()=>{o.length===0&&i(!1)},[o]),t.jsx(t.Fragment,{children:t.jsx(ue,{open:e,onOpenChange:i,children:t.jsxs(me,{className:"w-full max-w-[550px]",children:[t.jsx(pe,{children:t.jsx(he,{children:n.savedFilter.manageDialog.title})}),t.jsx(Gi,{bordered:!0,className:"max-h-[250px]",children:o.map(a=>t.jsx(ra,{savedFilter:a},a.id))}),t.jsx(fe,{children:t.jsx(ye,{asChild:!0,children:t.jsx(v,{children:n.savedFilter.manageDialog.close})})})]})})})}const ra=({savedFilter:e})=>{const i=g(),[n,r]=d.useState(!1),o=d.useCallback(()=>{const a=e.raw();if(!a.updated_date)return i.savedFilter.manageDialog.lastSaveAt.replace("{lastSaveAt}","n/a");const l=Mr(new Date,new Date(a.updated_date),{locale:ia});return i.savedFilter.manageDialog.lastSaveAt.replace("{lastSaveAt}",l)},[e.raw()]);return t.jsxs(t.Fragment,{children:[t.jsx(Xi,{title:e.raw().title,description:o(),className:"border-b last:border-b-0 relative px-3 py-2 group",onEdit:()=>r(!0),onDelete:()=>Mn(e,i)},e.id),t.jsx(it,{open:n,onOpenChange:r,savedFilter:e})]})};oi.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersManageDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};function ai(){const e=g(),{queryBuilder:i}=x(),n=i.getSavedFilters(),[r,o]=d.useState(!1),[a,l]=d.useState(!1),s=i.getSelectedSavedFilter(),c=function(){o(!1),l(!0)},u=d.useMemo(()=>new Date,[s==null?void 0:s.id]);return t.jsxs(t.Fragment,{children:[t.jsxs(vr,{value:s==null?void 0:s.id,onValueChange:m=>{var f;return(f=n.find(p=>p.id===m))==null?void 0:f.select()},open:r,onOpenChange:o,disabled:n.length===0,children:[t.jsxs(D,{open:n.length>0?!1:void 0,children:[t.jsx(A,{asChild:!0,children:t.jsx(gr,{className:"w-[135px] h-7",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Sr,{size:14})," ",e.savedFilter.myFilters]})})}),t.jsx(N,{children:e.savedFilter.noSavedFilters})]}),t.jsxs(xr,{children:[n.map(m=>t.jsx(Cr,{value:m.id,children:m.raw().title},m.id)),t.jsx(br,{}),t.jsx(v,{size:"sm",variant:"ghost",className:"w-full pl-2 justify-start",onClick:c,children:e.savedFilter.manageFilters})]})]},+u),t.jsx(oi,{open:a,onOpenChange:l})]})}ai.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersSelect"};function si({className:e,...i}){return t.jsx("div",{className:q("flex",e),...i,children:t.jsxs("div",{className:"flex gap-4 items-center",onClick:n=>n.stopPropagation(),children:[t.jsxs("div",{className:"flex whitespace-nowrap",children:[t.jsx(ti,{}),t.jsx(ni,{}),t.jsx(ei,{}),t.jsx(ii,{}),t.jsx(ri,{})]}),t.jsx(ai,{})]})})}si.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersRightActions"};function li(){const{queryBuilder:e}=x(),[i,n]=d.useState(!1),r=e.getSelectedSavedFilter();return t.jsxs(t.Fragment,{children:[t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",onClick:()=>n(!0),children:t.jsx(Ue,{})}),t.jsx(it,{open:i,onOpenChange:n,savedFilter:r})]})}li.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersEditAction"};function ci(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter();return n!=null&&n.isDirty()?t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:!n,onClick:()=>n.discardChanges(),children:t.jsx(kr,{})})}),t.jsx(N,{children:e.savedFilter.discardTooltip})]}):null}ci.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersUndoAction"};function di(){const e=g(),{queryBuilder:i,enableFavorite:n}=x(),r=i.getSelectedSavedFilter();if(!n)return null;const o=function(){r?r.save(le.Filter,{favorite:!r.isFavorite()}):i.saveNewFilter({favorite:!0})};return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:!r,onClick:o,children:t.jsx(Dr,{className:r!=null&&r.isFavorite()?"stroke-yellow-500 fill-yellow-500":""})})}),t.jsx(N,{children:r!=null&&r.isFavorite()?e.savedFilter.favoriteTooltip.unset:e.savedFilter.favoriteTooltip.set})]})}di.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersStarAction"};function ui({className:e,...i}){const{queryBuilder:n}=x(),r=n.getSelectedSavedFilter();return t.jsxs("div",{className:q("flex items-center gap-4 whitespace-nowrap text-ellipsis overflow-hidden",e),...i,children:[t.jsx("div",{className:"text-ellipsis overflow-hidden text-base",children:r?r.raw().title:n.coreProps.savedFilterDefaultTitle}),t.jsxs("div",{className:"flex items-center",onClick:o=>o.stopPropagation(),children:[t.jsx(li,{}),t.jsx(di,{}),t.jsx(ci,{})]})]})}ui.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersLeftActions"};const oa=()=>{const{t:e}=ce("common");return{queryBar:{empty:e("common.queryBar.empty"),deletePopover:{title:e("common.queryBar.deletePopover.title"),cancel:e("common.queryBar.deletePopover.cancel"),ok:e("common.queryBar.deletePopover.ok")},customPill:{createTooltip:e("common.queryBar.customPill.createTooltip"),cannotSaveAsCustomPill:e("common.queryBar.customPill.cannotSaveAsCustomPill")},saveDialog:{title:e("common.queryBar.saveDialog.title"),fields:{title:{label:e("common.queryBar.saveDialog.fields.title.label"),placeholder:e("common.queryBar.saveDialog.fields.title.placeholder")}},notice:e("common.queryBar.saveDialog.notice"),cancel:e("common.queryBar.saveDialog.cancel"),ok:e("common.queryBar.saveDialog.ok")}},queryPill:{operator:{changeOperatorTo:e("common.queryPill.operator.changeOperatorTo"),and:e("common.queryPill.operator.and"),or:e("common.queryPill.operator.or")},facet:i=>e(`common.filters.labels.${i}`,{defaultValue:i}),customPill:{editDialog:{title:e("common.queryPill.customPill.editDialog.title"),cancel:e("common.queryPill.customPill.editDialog.cancel"),ok:e("common.queryPill.customPill.editDialog.ok")},cantBeEmptyDialog:{title:e("common.queryPill.customPill.cantBeEmptyDialog.title"),description:e("common.queryPill.customPill.cantBeEmptyDialog.description"),ok:e("common.queryPill.customPill.cantBeEmptyDialog.ok")},titleExistsDialog:{title:e("common.queryPill.customPill.titleExistsDialog.title"),description:e("common.queryPill.customPill.titleExistsDialog.description"),ok:e("common.queryPill.customPill.titleExistsDialog.ok")},saveDialog:{title:e("common.queryPill.customPill.saveDialog.title"),confirmationMessage:e("common.queryPill.customPill.saveDialog.confirmationMessage"),affectedFilters:e("common.queryPill.customPill.saveDialog.affectedFilters"),cancel:e("common.queryPill.customPill.saveDialog.cancel"),ok:e("common.queryPill.customPill.saveDialog.ok")}}},toolbar:{combine:e("common.toolbar.combine"),newQuery:e("common.toolbar.newQuery"),clearAll:e("common.toolbar.clearAll"),clearAllDialog:{title:e("common.toolbar.clearAllDialog.title"),description:e("common.toolbar.clearAllDialog.description"),cancel:e("common.toolbar.clearAllDialog.cancel"),ok:e("common.toolbar.clearAllDialog.ok")},labels:e("common.toolbar.labels")},savedFilter:{deleteTooltip:e("common.savedFilter.deleteTooltip"),deleteDialog:{title:e("common.savedFilter.deleteDialog.title"),description:e("common.savedFilter.deleteDialog.description"),cancel:e("common.savedFilter.deleteDialog.cancel"),ok:e("common.savedFilter.deleteDialog.ok")},duplicateTooltip:e("common.savedFilter.duplicateTooltip"),overwriteDialog:{title:e("common.savedFilter.overwriteDialog.title"),description:e("common.savedFilter.overwriteDialog.description"),cancel:e("common.savedFilter.overwriteDialog.cancel"),ok:e("common.savedFilter.overwriteDialog.ok")},editDialog:{title:e("common.savedFilter.editDialog.title"),cancel:e("common.savedFilter.editDialog.cancel"),ok:e("common.savedFilter.editDialog.ok"),fields:{title:{label:e("common.savedFilter.editDialog.fields.title.label"),placeholder:e("common.savedFilter.editDialog.fields.title.placeholder")}}},myFilters:e("common.savedFilter.myFilters"),manageFilters:e("common.savedFilter.manageFilters"),manageDialog:{title:e("common.savedFilter.manageDialog.title"),close:e("common.savedFilter.manageDialog.close"),lastSaveAt:e("common.savedFilter.manageDialog.lastSaveAt")},newFilter:e("common.savedFilter.newFilter"),saveTooltip:{whenEmpty:e("common.savedFilter.saveTooltip.whenEmpty"),whenDirty:e("common.savedFilter.saveTooltip.whenDirty"),default:e("common.savedFilter.saveTooltip.default")},shareTooltip:{whenNotSaved:e("common.savedFilter.shareTooltip.whenNotSaved"),default:e("common.savedFilter.shareTooltip.default")},favoriteTooltip:{set:e("common.savedFilter.favoriteTooltip.set"),unset:e("common.savedFilter.favoriteTooltip.unset")},discardTooltip:e("common.savedFilter.discardTooltip"),noSavedFilters:e("common.savedFilter.noSavedFilters")}}},mi=["#C31D7E","#328536","#AA00FF","#C2410C","#047ABE","#E5231F","#007D85","#C51162","#7B5A90","#B85C00","#722ED1","#4D7C0F","#9F1239","#2D7D9A","#847545"];function De(e){return e&&typeof e=="object"&&!Array.isArray(e)}function pi(e,i){const n={...e},r=i;return De(e)&&De(i)&&Object.keys(i).forEach(o=>{De(r[o])&&o in e?n[o]=pi(n[o],r[o]):n[o]=r[o]}),n}function Z({className:e,enableCombine:i=!0,enableFavorite:n=!1,enableShowHideLabels:r,initialShowHideLabels:o=!0,queryReferenceColors:a=mi,queryCountIcon:l,fetchQueryCount:s,dictionary:c,customPillConfig:u,queryPillFacetFilterConfig:m,resolveSyntheticSqon:f,...p}){const y=Gt(p),C=oa(),k=d.useMemo(()=>pi(C,c||{}),[c,C]),[_,j]=d.useState(o),b=d.useCallback(I=>a[I%a.length],[a]),T=d.useMemo(()=>({queryBuilder:y,enableCombine:i,enableFavorite:n,enableShowHideLabels:r,showLabels:_,toggleLabels:j,queryCountIcon:l,getQueryReferenceColor:b,fetchQueryCount:s,dictionary:c,customPillConfig:u,queryPillFacetFilterConfig:m,resolveSyntheticSqon:f}),[y,i,n,r,_,j,l,b,s,c,u,m,f]);return t.jsx(dn.Provider,{value:k,children:t.jsx(Xe.Provider,{value:T,children:t.jsx(Zr,{type:"multiple",defaultValue:["query-builder"],className:e,children:t.jsxs(We,{value:"query-builder",className:"border-none",children:[t.jsxs(Ye,{asChild:!0,className:"border py-0 px-5 rounded-t data-[state=closed]:rounded hover:cursor-pointer",children:[t.jsx(ui,{className:"py-4 pr-4"}),t.jsx(si,{className:"ml-auto py-4"})]}),t.jsxs(Ge,{className:"border-l border-b border-r py-4 px-5 space-y-4 rounded-b",children:[t.jsx("div",{className:"flex flex-col gap-2 max-h-[30vh] overflow-y-scroll",children:y.getQueries().map(I=>t.jsx(Yn,{query:I},I.id))}),t.jsx(Zn,{})]})]})})})})}Z.__docgenInfo={description:"",methods:[],displayName:"QueryBuilder",props:{enableCombine:{defaultValue:{value:"true",computed:!1},required:!1},enableFavorite:{defaultValue:{value:"false",computed:!1},required:!1},initialShowHideLabels:{defaultValue:{value:"true",computed:!1},required:!1},queryReferenceColors:{defaultValue:{value:`[
  "#C31D7E",
  "#328536",
  "#AA00FF",
  "#C2410C",
  "#047ABE",
  "#E5231F",
  "#007D85",
  "#C51162",
  "#7B5A90",
  "#B85C00",
  "#722ED1",
  "#4D7C0F",
  "#9F1239",
  "#2D7D9A",
  "#847545",
]`,computed:!1},required:!1}}};const aa={queryBar:{empty:"Use the search tools & facets on the left to build a query",deletePopover:{title:"Delete this query?",cancel:"Cancel",ok:"Delete"},customPill:{createTooltip:"Create a custom query",cannotSaveAsCustomPill:"Custom queries cannot include other custom queries"},saveDialog:{title:"Save this query",fields:{title:{label:"Query name",placeholder:"Untitled query"}},notice:'You will find your saved queries in the sidebar under the "Queries" heading.',cancel:"Cancel",ok:"Save"}},queryPill:{operator:{changeOperatorTo:"Change operator to",and:"and",or:"or"},facet:e=>e,customPill:{editDialog:{title:"Edit custom query",cancel:"Cancel",ok:"Save"},cantBeEmptyDialog:{title:"Query cannot be empty",description:"Your custom query must contain at least one criteria.",ok:"Close"},titleExistsDialog:{title:"Name already in use",description:"A custom query with this name already exists. Please assign a unique name.",ok:"Close"},saveDialog:{title:"Edit this query?",confirmationMessage:'You are about to edit the custom query "{title}", which may affect your results.',affectedFilters:"Affected saved filters:",cancel:"Cancel",ok:"Save"}}},toolbar:{combine:"Combine",newQuery:"New query",clearAll:"Clear all",clearAllDialog:{title:"Delete all queries?",description:"You are about to delete all your queries. They will be lost forever.",cancel:"Cancel",ok:"Delete"},labels:"Labels"},savedFilter:{deleteTooltip:"Delete filter",deleteDialog:{title:"Permanently delete this filter?",description:"You are about to permanently delete this filter and all of its queries.",cancel:"Cancel",ok:"Delete filter"},duplicateTooltip:"Duplicate filter",overwriteDialog:{title:"Unsaved changes",description:"You are about to create a new filter; all modifications will be lost.",cancel:"Cancel",ok:"Create"},editDialog:{title:"Edit filter",cancel:"Cancel",ok:"Save",fields:{title:{label:"Title",placeholder:"Untitled query"}}},myFilters:"My Filters",manageFilters:"Manage filters",manageDialog:{title:"Manage filters",close:"Close",lastSaveAt:"Last saved at: {lastSaveAt} ago"},newFilter:"New filter",saveTooltip:{whenEmpty:"Add a query to save",whenDirty:"Save changes",default:"Save filter"},shareTooltip:{whenNotSaved:"Save filter to share",default:"Share (Copy url)"},favoriteTooltip:{set:"Set as default filter",unset:"Unset default filter"},discardTooltip:"Discard unsaved changes",noSavedFilters:"You have no saved filters"}},cs={title:"Feature/Query Builder",component:Z,args:{id:"query-builder-id",enableCombine:!0,enableFavorite:!0,enableShowHideLabels:!0,initialShowHideLabels:!0,queryReferenceColors:mi,resolveSyntheticSqon:h(),dictionary:aa}},Ae="query-builder-id",sa="query-builder-custom-pill-id",Ne="query-builder-query-pill-filter-id",gt=e=>e[Math.floor(Math.random()*e.length)],se=(e=1,i=100)=>Math.floor(Math.random()*(i-e+1))+e,hi=()=>Math.random().toString(36).substring(7),la=[P.GreaterThan,P.LessThan,P.Between,P.GreaterThanOrEqualTo,P.LessThanOrEqualTo],X=e=>({id:B(),title:(e==null?void 0:e.title)||`Custom Pill ${se(1,50)}`,queries:[Q()],keycloak_id:B(),creation_date:new Date().toISOString(),updated_date:new Date().toISOString(),tag:"tag",favorite:!1}),ca=e=>la.includes(e)?Array.from({length:2},()=>se()):Array.from({length:se(2,5)},()=>hi()),Q=(e=B())=>{const i=se(1,3),n=Array.from({length:i},()=>{const r=Object.values(P).filter(a=>a!==P.And&&a!==P.Or&&a!==P.Not),o=gt(r);return{op:o,content:{field:`field_${hi()}`,value:ca(o)}}});return{id:e,op:gt(["and","or"]),content:n}};function fi({queryBuilderId:e}){return t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{children:"Testing Tools:"}),t.jsxs("div",{className:"flex border p-4 gap-2",children:[t.jsx(v,{color:"primary",size:"sm",onClick:()=>L.addQuery(e,Q()),children:"Add query"}),t.jsx(v,{color:"primary",size:"sm",onClick:()=>{L.updateActiveQueryField(e,{field:"field",value:["new-value"]})},children:"Add field to active query"}),t.jsx(v,{color:"primary",size:"sm",onClick:()=>{L.updateActiveQueryField(e,{field:"field",value:[]})},children:"Remove field from active query"})]})]})}const te={args:{id:Ae,initialState:{...L.getLocalQueryBuilderState(Ae),savedFilters:[{id:B(),title:"Olivier's Filter",favorite:!1,queries:[Q(),Q(),Q()]},{id:B(),title:"Francis' Filter",favorite:!1,queries:[Q(),Q()]},{id:B(),title:"Luc's Filter",favorite:!1,queries:[Q(),Q(),Q()]}],selectedQueryIndexes:[]},fetchQueryCount:async()=>Promise.resolve(15),onStateChange:h(),onActiveQueryChange:h(),onQueryCreate:h(),onQueryDelete:h(),onQuerySelectChange:h(),onQueryUpdate:h(),onCustomPillSave:h(),onCustomPillUpdate:h(),onSavedFilterCreate:h(),onSavedFilterDelete:h(),onSavedFilterSave:h(),onSavedFilterUpdate:h()},render:e=>t.jsxs("div",{className:"space-y-6",children:[t.jsx(Z,{...e}),t.jsx(fi,{queryBuilderId:Ae})]})},xt=B(),ne={args:{id:sa,queryCountIcon:t.jsx(Pr,{size:14}),initialState:{activeQueryId:xt,queries:[Q(xt),Q()],savedFilters:[],selectedQueryIndexes:[]},fetchQueryCount:async()=>Promise.resolve(15),onStateChange:h(),onActiveQueryChange:h(),onQueryCreate:h(),onQueryDelete:h(),onQuerySelectChange:h(),onQueryUpdate:h(),onCustomPillSave:e=>(_e("onCustomPillSave")(e),new Promise(i=>setTimeout(()=>i(X(e)),750))),onCustomPillUpdate:e=>(_e("onCustomPillUpdate")(e),new Promise(i=>setTimeout(()=>i(X(e)),750))),onSavedFilterCreate:h(),onSavedFilterDelete:h(),onSavedFilterSave:h(),onSavedFilterUpdate:h(),customPillConfig:{enable:!0,queryBuilderEditId:"qb-custom-pill-edit-id",fetchCustomPillById:()=>new Promise(e=>setTimeout(()=>e(X()),750)),validateCustomPillTitle:()=>new Promise(e=>setTimeout(()=>e(!0),750)),fetchSavedFiltersByCustomPillId:()=>new Promise(e=>setTimeout(()=>e([X(),X()]),750))}},render:e=>t.jsx(Z,{...e})},ie={args:{id:Ne,initialState:{...L.getLocalQueryBuilderState(Ne),savedFilters:[],selectedQueryIndexes:[]},fetchQueryCount:async()=>Promise.resolve(15),onStateChange:h(),onActiveQueryChange:h(),onQueryCreate:h(),onQueryDelete:h(),onQuerySelectChange:h(),onQueryUpdate:h(),onSavedFilterCreate:h(),onSavedFilterDelete:h(),onSavedFilterSave:h(),onSavedFilterUpdate:h(),queryPillFacetFilterConfig:{enable:!0,onFacetClick:e=>(_e("onFacetClick")(e),t.jsx("div",{className:"italic text-sm",children:"Insert Filter Content"}))}},render:e=>t.jsxs("div",{className:"space-y-6",children:[t.jsx(Z,{...e}),t.jsx(fi,{queryBuilderId:Ne})]})};var Ct,bt,Pt;te.parameters={...te.parameters,docs:{...(Ct=te.parameters)==null?void 0:Ct.docs,source:{originalSource:`{
  args: {
    id: qbId,
    initialState: {
      ...queryBuilderRemote.getLocalQueryBuilderState(qbId),
      savedFilters: [{
        id: v4(),
        title: "Olivier's Filter",
        favorite: false,
        queries: [generateRandomQuery(), generateRandomQuery(), generateRandomQuery()]
      }, {
        id: v4(),
        title: "Francis' Filter",
        favorite: false,
        queries: [generateRandomQuery(), generateRandomQuery()]
      }, {
        id: v4(),
        title: "Luc's Filter",
        favorite: false,
        queries: [generateRandomQuery(), generateRandomQuery(), generateRandomQuery()]
      }],
      selectedQueryIndexes: []
    },
    fetchQueryCount: async () => Promise.resolve(15),
    onStateChange: fn(),
    onActiveQueryChange: fn(),
    onQueryCreate: fn(),
    onQueryDelete: fn(),
    onQuerySelectChange: fn(),
    onQueryUpdate: fn(),
    onCustomPillSave: fn(),
    onCustomPillUpdate: fn(),
    onSavedFilterCreate: fn(),
    onSavedFilterDelete: fn(),
    onSavedFilterSave: fn(),
    onSavedFilterUpdate: fn()
  },
  render: args => {
    return <div className="space-y-6">
        <QueryBuilder {...args} />
        <TestingTools queryBuilderId={qbId} />
      </div>;
  }
}`,...(Pt=(bt=te.parameters)==null?void 0:bt.docs)==null?void 0:Pt.source}}};var jt,qt,St;ne.parameters={...ne.parameters,docs:{...(jt=ne.parameters)==null?void 0:jt.docs,source:{originalSource:`{
  args: {
    id: qbCustomPillId,
    queryCountIcon: <UserIcon size={14} />,
    initialState: {
      activeQueryId: customPillActiveQueryId,
      queries: [generateRandomQuery(customPillActiveQueryId), generateRandomQuery()],
      savedFilters: [],
      selectedQueryIndexes: []
    },
    fetchQueryCount: async () => Promise.resolve(15),
    onStateChange: fn(),
    onActiveQueryChange: fn(),
    onQueryCreate: fn(),
    onQueryDelete: fn(),
    onQuerySelectChange: fn(),
    onQueryUpdate: fn(),
    onCustomPillSave: filter => {
      action('onCustomPillSave')(filter);
      return new Promise(resolve => setTimeout(() => resolve(generateRandomUserSavedFilter(filter)), 750));
    },
    onCustomPillUpdate: filter => {
      action('onCustomPillUpdate')(filter);
      return new Promise(resolve => setTimeout(() => resolve(generateRandomUserSavedFilter(filter)), 750));
    },
    onSavedFilterCreate: fn(),
    onSavedFilterDelete: fn(),
    onSavedFilterSave: fn(),
    onSavedFilterUpdate: fn(),
    customPillConfig: {
      enable: true,
      queryBuilderEditId: 'qb-custom-pill-edit-id',
      fetchCustomPillById: () => new Promise(resolve => setTimeout(() => resolve(generateRandomUserSavedFilter()), 750)),
      validateCustomPillTitle: () => new Promise(resolve => setTimeout(() => resolve(true), 750)),
      fetchSavedFiltersByCustomPillId: () => new Promise(resolve => setTimeout(() => resolve([generateRandomUserSavedFilter(), generateRandomUserSavedFilter()]), 750))
    }
  },
  render: args => {
    return <QueryBuilder {...args} />;
  }
}`,...(St=(qt=ne.parameters)==null?void 0:qt.docs)==null?void 0:St.source}}};var Qt,wt,kt;ie.parameters={...ie.parameters,docs:{...(Qt=ie.parameters)==null?void 0:Qt.docs,source:{originalSource:`{
  args: {
    id: qbQueryPillFilterId,
    initialState: {
      ...queryBuilderRemote.getLocalQueryBuilderState(qbQueryPillFilterId),
      savedFilters: [],
      selectedQueryIndexes: []
    },
    fetchQueryCount: async () => Promise.resolve(15),
    onStateChange: fn(),
    onActiveQueryChange: fn(),
    onQueryCreate: fn(),
    onQueryDelete: fn(),
    onQuerySelectChange: fn(),
    onQueryUpdate: fn(),
    onSavedFilterCreate: fn(),
    onSavedFilterDelete: fn(),
    onSavedFilterSave: fn(),
    onSavedFilterUpdate: fn(),
    queryPillFacetFilterConfig: {
      enable: true,
      onFacetClick: filter => {
        action('onFacetClick')(filter);
        return <div className="italic text-sm">Insert Filter Content</div>;
      }
    }
  },
  render: args => {
    return <div className="space-y-6">
        <QueryBuilder {...args} />
        <TestingTools queryBuilderId={qbQueryPillFilterId} />
      </div>;
  }
}`,...(kt=(wt=ie.parameters)==null?void 0:wt.docs)==null?void 0:kt.source}}};const ds=["Default","CustomPill","QueryPillFilter"];export{ne as CustomPill,te as Default,ie as QueryPillFilter,ds as __namedExportsOrder,cs as default};

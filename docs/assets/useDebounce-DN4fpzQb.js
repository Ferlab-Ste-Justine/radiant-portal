import{j as N}from"./jsx-runtime-D_zvdyIk.js";import{a as qe,r as a}from"./index-DUAV1Q2A.js";import{R as Ve,P as Pe,O as Le,a as Fe}from"./index-BiAv9jRD.js";import{P as j}from"./index-aKoabQ1X.js";import{u as P}from"./Combination-BCojpehm.js";import{c as $}from"./utils-BNf5BS2b.js";import"./dialog-Ch3KhYU6.js";var he=1,Ke=.9,Oe=.8,Te=.17,Q=.1,Z=.999,Ue=.9999,Ge=.99,ze=/[\\\/_+.#"@\[\(\{&]/,He=/[\\\/_+.#"@\[\(\{&]/g,Be=/[\s-]/,xe=/[\s-]/g;function ne(e,n,t,d,l,u,f){if(u===n.length)return l===e.length?he:Ge;var v=`${l},${u}`;if(f[v]!==void 0)return f[v];for(var h=d.charAt(u),m=t.indexOf(h,l),s=0,i,g,w,k;m>=0;)i=ne(e,n,t,d,m+1,u+1,f),i>s&&(m===l?i*=he:ze.test(e.charAt(m-1))?(i*=Oe,w=e.slice(l,m-1).match(He),w&&l>0&&(i*=Math.pow(Z,w.length))):Be.test(e.charAt(m-1))?(i*=Ke,k=e.slice(l,m-1).match(xe),k&&l>0&&(i*=Math.pow(Z,k.length))):(i*=Te,l>0&&(i*=Math.pow(Z,m-l))),e.charAt(m)!==n.charAt(u)&&(i*=Ue)),(i<Q&&t.charAt(m-1)===d.charAt(u+1)||d.charAt(u+1)===d.charAt(u)&&t.charAt(m-1)!==d.charAt(u))&&(g=ne(e,n,t,d,m+1,u+2,f),g*Q>i&&(i=g*Q)),i>s&&(s=i),m=t.indexOf(h,m+1);return f[v]=s,s}function ge(e){return e.toLowerCase().replace(xe," ")}function We(e,n,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,ne(e,n,ge(e),ge(n),0,0,{})}var ee={exports:{}},te={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var be;function Je(){if(be)return te;be=1;var e=qe();function n(i,g){return i===g&&(i!==0||1/i===1/g)||i!==i&&g!==g}var t=typeof Object.is=="function"?Object.is:n,d=e.useState,l=e.useEffect,u=e.useLayoutEffect,f=e.useDebugValue;function v(i,g){var w=g(),k=d({inst:{value:w,getSnapshot:g}}),R=k[0].inst,I=k[1];return u(function(){R.value=w,R.getSnapshot=g,h(R)&&I({inst:R})},[i,w,g]),l(function(){return h(R)&&I({inst:R}),i(function(){h(R)&&I({inst:R})})},[i]),f(w),w}function h(i){var g=i.getSnapshot;i=i.value;try{var w=g();return!t(i,w)}catch{return!0}}function m(i,g){return g()}var s=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:v;return te.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:s,te}var ye;function Xe(){return ye||(ye=1,ee.exports=Je()),ee.exports}var Ye=Xe(),K='[cmdk-group=""]',re='[cmdk-group-items=""]',Qe='[cmdk-group-heading=""]',le='[cmdk-item=""]',we=`${le}:not([aria-disabled="true"])`,ae="cmdk-item-select",D="data-value",Ze=(e,n,t)=>We(e,n,t),Se=a.createContext(void 0),T=()=>a.useContext(Se),Ee=a.createContext(void 0),oe=()=>a.useContext(Ee),ke=a.createContext(void 0),Re=a.forwardRef((e,n)=>{let t=V(()=>{var r,c;return{search:"",value:(c=(r=e.value)!=null?r:e.defaultValue)!=null?c:"",filtered:{count:0,items:new Map,groups:new Set}}}),d=V(()=>new Set),l=V(()=>new Map),u=V(()=>new Map),f=V(()=>new Set),v=Ce(e),{label:h,children:m,value:s,onValueChange:i,filter:g,shouldFilter:w,loop:k,disablePointerSelection:R=!1,vimBindings:I=!0,...U}=e,ue=P(),ie=P(),ce=P(),M=a.useRef(null),x=dt();q(()=>{if(s!==void 0){let r=s.trim();t.current.value=r,S.emit()}},[s]),q(()=>{x(6,se)},[]);let S=a.useMemo(()=>({subscribe:r=>(f.current.add(r),()=>f.current.delete(r)),snapshot:()=>t.current,setState:(r,c,p)=>{var o,b,y;if(!Object.is(t.current[r],c)){if(t.current[r]=c,r==="search")J(),B(),x(1,W);else if(r==="value"&&(p||x(5,se),((o=v.current)==null?void 0:o.value)!==void 0)){let C=c??"";(y=(b=v.current).onValueChange)==null||y.call(b,C);return}S.emit()}},emit:()=>{f.current.forEach(r=>r())}}),[]),H=a.useMemo(()=>({value:(r,c,p)=>{var o;c!==((o=u.current.get(r))==null?void 0:o.value)&&(u.current.set(r,{value:c,keywords:p}),t.current.filtered.items.set(r,de(c,p)),x(2,()=>{B(),S.emit()}))},item:(r,c)=>(d.current.add(r),c&&(l.current.has(c)?l.current.get(c).add(r):l.current.set(c,new Set([r]))),x(3,()=>{J(),B(),t.current.value||W(),S.emit()}),()=>{u.current.delete(r),d.current.delete(r),t.current.filtered.items.delete(r);let p=L();x(4,()=>{J(),(p==null?void 0:p.getAttribute("id"))===r&&W(),S.emit()})}),group:r=>(l.current.has(r)||l.current.set(r,new Set),()=>{u.current.delete(r),l.current.delete(r)}),filter:()=>v.current.shouldFilter,label:h||e["aria-label"],getDisablePointerSelection:()=>v.current.disablePointerSelection,listId:ue,inputId:ce,labelId:ie,listInnerRef:M}),[]);function de(r,c){var p,o;let b=(o=(p=v.current)==null?void 0:p.filter)!=null?o:Ze;return r?b(r,t.current.search,c):0}function B(){if(!t.current.search||v.current.shouldFilter===!1)return;let r=t.current.filtered.items,c=[];t.current.filtered.groups.forEach(o=>{let b=l.current.get(o),y=0;b.forEach(C=>{let _=r.get(C);y=Math.max(_,y)}),c.push([o,y])});let p=M.current;F().sort((o,b)=>{var y,C;let _=o.getAttribute("id"),G=b.getAttribute("id");return((y=r.get(G))!=null?y:0)-((C=r.get(_))!=null?C:0)}).forEach(o=>{let b=o.closest(re);b?b.appendChild(o.parentElement===b?o:o.closest(`${re} > *`)):p.appendChild(o.parentElement===p?o:o.closest(`${re} > *`))}),c.sort((o,b)=>b[1]-o[1]).forEach(o=>{var b;let y=(b=M.current)==null?void 0:b.querySelector(`${K}[${D}="${encodeURIComponent(o[0])}"]`);y==null||y.parentElement.appendChild(y)})}function W(){let r=F().find(p=>p.getAttribute("aria-disabled")!=="true"),c=r==null?void 0:r.getAttribute(D);S.setState("value",c||void 0)}function J(){var r,c,p,o;if(!t.current.search||v.current.shouldFilter===!1){t.current.filtered.count=d.current.size;return}t.current.filtered.groups=new Set;let b=0;for(let y of d.current){let C=(c=(r=u.current.get(y))==null?void 0:r.value)!=null?c:"",_=(o=(p=u.current.get(y))==null?void 0:p.keywords)!=null?o:[],G=de(C,_);t.current.filtered.items.set(y,G),G>0&&b++}for(let[y,C]of l.current)for(let _ of C)if(t.current.filtered.items.get(_)>0){t.current.filtered.groups.add(y);break}t.current.filtered.count=b}function se(){var r,c,p;let o=L();o&&(((r=o.parentElement)==null?void 0:r.firstChild)===o&&((p=(c=o.closest(K))==null?void 0:c.querySelector(Qe))==null||p.scrollIntoView({block:"nearest"})),o.scrollIntoView({block:"nearest"}))}function L(){var r;return(r=M.current)==null?void 0:r.querySelector(`${le}[aria-selected="true"]`)}function F(){var r;return Array.from(((r=M.current)==null?void 0:r.querySelectorAll(we))||[])}function X(r){let c=F()[r];c&&S.setState("value",c.getAttribute(D))}function Y(r){var c;let p=L(),o=F(),b=o.findIndex(C=>C===p),y=o[b+r];(c=v.current)!=null&&c.loop&&(y=b+r<0?o[o.length-1]:b+r===o.length?o[0]:o[b+r]),y&&S.setState("value",y.getAttribute(D))}function fe(r){let c=L(),p=c==null?void 0:c.closest(K),o;for(;p&&!o;)p=r>0?it(p,K):ct(p,K),o=p==null?void 0:p.querySelector(we);o?S.setState("value",o.getAttribute(D)):Y(r)}let me=()=>X(F().length-1),pe=r=>{r.preventDefault(),r.metaKey?me():r.altKey?fe(1):Y(1)},ve=r=>{r.preventDefault(),r.metaKey?X(0):r.altKey?fe(-1):Y(-1)};return a.createElement(j.div,{ref:n,tabIndex:-1,...U,"cmdk-root":"",onKeyDown:r=>{var c;if((c=U.onKeyDown)==null||c.call(U,r),!r.defaultPrevented)switch(r.key){case"n":case"j":{I&&r.ctrlKey&&pe(r);break}case"ArrowDown":{pe(r);break}case"p":case"k":{I&&r.ctrlKey&&ve(r);break}case"ArrowUp":{ve(r);break}case"Home":{r.preventDefault(),X(0);break}case"End":{r.preventDefault(),me();break}case"Enter":if(!r.nativeEvent.isComposing&&r.keyCode!==229){r.preventDefault();let p=L();if(p){let o=new Event(ae);p.dispatchEvent(o)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:H.inputId,id:H.labelId,style:ft},h),z(e,r=>a.createElement(Ee.Provider,{value:S},a.createElement(Se.Provider,{value:H},r))))}),et=a.forwardRef((e,n)=>{var t,d;let l=P(),u=a.useRef(null),f=a.useContext(ke),v=T(),h=Ce(e),m=(d=(t=h.current)==null?void 0:t.forceMount)!=null?d:f==null?void 0:f.forceMount;q(()=>{if(!m)return v.item(l,f==null?void 0:f.id)},[m]);let s=Ie(l,u,[e.value,e.children,u],e.keywords),i=oe(),g=A(x=>x.value&&x.value===s.current),w=A(x=>m||v.filter()===!1?!0:x.search?x.filtered.items.get(l)>0:!0);a.useEffect(()=>{let x=u.current;if(!(!x||e.disabled))return x.addEventListener(ae,k),()=>x.removeEventListener(ae,k)},[w,e.onSelect,e.disabled]);function k(){var x,S;R(),(S=(x=h.current).onSelect)==null||S.call(x,s.current)}function R(){i.setState("value",s.current,!0)}if(!w)return null;let{disabled:I,value:U,onSelect:ue,forceMount:ie,keywords:ce,...M}=e;return a.createElement(j.div,{ref:O([u,n]),...M,id:l,"cmdk-item":"",role:"option","aria-disabled":!!I,"aria-selected":!!g,"data-disabled":!!I,"data-selected":!!g,onPointerMove:I||v.getDisablePointerSelection()?void 0:R,onClick:I?void 0:k},e.children)}),tt=a.forwardRef((e,n)=>{let{heading:t,children:d,forceMount:l,...u}=e,f=P(),v=a.useRef(null),h=a.useRef(null),m=P(),s=T(),i=A(w=>l||s.filter()===!1?!0:w.search?w.filtered.groups.has(f):!0);q(()=>s.group(f),[]),Ie(f,v,[e.value,e.heading,h]);let g=a.useMemo(()=>({id:f,forceMount:l}),[l]);return a.createElement(j.div,{ref:O([v,n]),...u,"cmdk-group":"",role:"presentation",hidden:i?void 0:!0},t&&a.createElement("div",{ref:h,"cmdk-group-heading":"","aria-hidden":!0,id:m},t),z(e,w=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?m:void 0},a.createElement(ke.Provider,{value:g},w))))}),rt=a.forwardRef((e,n)=>{let{alwaysRender:t,...d}=e,l=a.useRef(null),u=A(f=>!f.search);return!t&&!u?null:a.createElement(j.div,{ref:O([l,n]),...d,"cmdk-separator":"",role:"separator"})}),nt=a.forwardRef((e,n)=>{let{onValueChange:t,...d}=e,l=e.value!=null,u=oe(),f=A(s=>s.search),v=A(s=>s.value),h=T(),m=a.useMemo(()=>{var s;let i=(s=h.listInnerRef.current)==null?void 0:s.querySelector(`${le}[${D}="${encodeURIComponent(v)}"]`);return i==null?void 0:i.getAttribute("id")},[]);return a.useEffect(()=>{e.value!=null&&u.setState("search",e.value)},[e.value]),a.createElement(j.input,{ref:n,...d,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":h.listId,"aria-labelledby":h.labelId,"aria-activedescendant":m,id:h.inputId,type:"text",value:l?e.value:f,onChange:s=>{l||u.setState("search",s.target.value),t==null||t(s.target.value)}})}),at=a.forwardRef((e,n)=>{let{children:t,label:d="Suggestions",...l}=e,u=a.useRef(null),f=a.useRef(null),v=T();return a.useEffect(()=>{if(f.current&&u.current){let h=f.current,m=u.current,s,i=new ResizeObserver(()=>{s=requestAnimationFrame(()=>{let g=h.offsetHeight;m.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return i.observe(h),()=>{cancelAnimationFrame(s),i.unobserve(h)}}},[]),a.createElement(j.div,{ref:O([u,n]),...l,"cmdk-list":"",role:"listbox","aria-label":d,id:v.listId},z(e,h=>a.createElement("div",{ref:O([f,v.listInnerRef]),"cmdk-list-sizer":""},h)))}),lt=a.forwardRef((e,n)=>{let{open:t,onOpenChange:d,overlayClassName:l,contentClassName:u,container:f,...v}=e;return a.createElement(Ve,{open:t,onOpenChange:d},a.createElement(Pe,{container:f},a.createElement(Le,{"cmdk-overlay":"",className:l}),a.createElement(Fe,{"aria-label":e.label,"cmdk-dialog":"",className:u},a.createElement(Re,{ref:n,...v}))))}),ot=a.forwardRef((e,n)=>A(t=>t.filtered.count===0)?a.createElement(j.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),ut=a.forwardRef((e,n)=>{let{progress:t,children:d,label:l="Loading...",...u}=e;return a.createElement(j.div,{ref:n,...u,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l},z(e,f=>a.createElement("div",{"aria-hidden":!0},f)))}),E=Object.assign(Re,{List:at,Item:et,Input:nt,Group:tt,Separator:rt,Dialog:lt,Empty:ot,Loading:ut});function it(e,n){let t=e.nextElementSibling;for(;t;){if(t.matches(n))return t;t=t.nextElementSibling}}function ct(e,n){let t=e.previousElementSibling;for(;t;){if(t.matches(n))return t;t=t.previousElementSibling}}function Ce(e){let n=a.useRef(e);return q(()=>{n.current=e}),n}var q=typeof window>"u"?a.useEffect:a.useLayoutEffect;function V(e){let n=a.useRef();return n.current===void 0&&(n.current=e()),n}function O(e){return n=>{e.forEach(t=>{typeof t=="function"?t(n):t!=null&&(t.current=n)})}}function A(e){let n=oe(),t=()=>e(n.snapshot());return Ye.useSyncExternalStore(n.subscribe,t,t)}function Ie(e,n,t,d=[]){let l=a.useRef(),u=T();return q(()=>{var f;let v=(()=>{var m;for(let s of t){if(typeof s=="string")return s.trim();if(typeof s=="object"&&"current"in s)return s.current?(m=s.current.textContent)==null?void 0:m.trim():l.current}})(),h=d.map(m=>m.trim());u.value(e,v,h),(f=n.current)==null||f.setAttribute(D,v),l.current=v}),l}var dt=()=>{let[e,n]=a.useState(),t=V(()=>new Map);return q(()=>{t.current.forEach(d=>d()),t.current=new Map},[e]),(d,l)=>{t.current.set(d,l),n({})}};function st(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function z({asChild:e,children:n},t){return e&&a.isValidElement(n)?a.cloneElement(st(n),{ref:n.ref},t(n.props.children)):t(n)}var ft={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Ne=a.forwardRef(({className:e,...n},t)=>N.jsx(E,{ref:t,className:$("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...n}));Ne.displayName=E.displayName;const $e=a.forwardRef(({className:e,wrapperClassName:n,rightAddon:t,disabled:d,...l},u)=>N.jsxs("div",{className:$("flex h-10 items-center px-3 bg-background rounded-md border border-border enabled:focus-within:ring-2 enabled:focus-within:ring-ring",n,{"cursor-not-allowed opacity-50":d}),"cmdk-input-wrapper":"",children:[N.jsx(E.Input,{ref:u,className:$("flex w-full rounded-md bg-background text-sm outline-none placeholder:text-muted-foreground",e),disabled:d,...l}),t]}));$e.displayName=E.Input.displayName;const Ae=a.forwardRef(({className:e,...n},t)=>N.jsx(E.List,{ref:t,className:$("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...n}));Ae.displayName=E.List.displayName;const je=a.forwardRef(({className:e,...n},t)=>A(l=>l.filtered.count===0)?N.jsx("div",{ref:t,className:$("py-4 text-center text-sm",e),"cmdk-empty":"",role:"presentation",...n}):null);je.displayName=E.Empty.displayName;const Me=a.forwardRef(({className:e,...n},t)=>N.jsx(E.Group,{ref:t,className:$("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...n}));Me.displayName=E.Group.displayName;const _e=a.forwardRef(({className:e,...n},t)=>N.jsx(E.Separator,{ref:t,className:$("-mx-1 h-px bg-border",e),...n}));_e.displayName=E.Separator.displayName;const De=a.forwardRef(({className:e,...n},t)=>N.jsx(E.Item,{ref:t,className:$("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...n}));De.displayName=E.Item.displayName;Ne.__docgenInfo={description:"",methods:[]};$e.__docgenInfo={description:"",methods:[],props:{wrapperClassName:{required:!1,tsType:{name:"string"},description:""},rightAddon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};Ae.__docgenInfo={description:"",methods:[]};je.__docgenInfo={description:"The `CommandEmpty` of shadcn/ui will cause the cmdk empty not rendering correctly.\nSo we create one and copy the `Empty` implementation from `cmdk`.\n\n@reference: https://github.com/hsuanyi-chou/shadcn-ui-expansions/issues/34#issuecomment-1949561607",methods:[]};Me.__docgenInfo={description:"",methods:[]};De.__docgenInfo={description:"",methods:[]};_e.__docgenInfo={description:"",methods:[]};function wt(e,n){const[t,d]=a.useState(e);return a.useEffect(()=>{const l=setTimeout(()=>d(e),n||500);return()=>{clearTimeout(l)}},[e,n]),t}export{$e as C,E as V,Ae as a,Me as b,De as c,je as d,Ne as e,wt as u};
